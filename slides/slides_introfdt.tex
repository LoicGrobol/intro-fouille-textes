% Copyright © 2018, Loïc Grobol <loic.grobol@gmail.com>
% This document is available under the terms of the Creative Commons Attribution 4.0 International License (CC BY 4.0) (https://creativecommons.org/licenses/by/4.0/)

\RequirePackage{xparse}
\RequirePackage{shellesc}
% Settings
\NewDocumentCommand\myname{}{Loïc Grobol}
\NewDocumentCommand\mylab{}{Lattice / ALMAnaCH}
\NewDocumentCommand\pdftitle{}{Introduction à la fouille de textes}
\NewDocumentCommand\mymail{}{loic.grobol@gmail.com}
\NewDocumentCommand\titlepagetitle{}{\pdftitle}
\NewDocumentCommand\docdate{}{2018}
\NewDocumentCommand\conference{}{M1 Plurital}

\documentclass[hyperref={unicode}, xcolor={svgnames}, french]{beamer}
\usetheme[sectionpage=progressbar,
          subsectionpage=progressbar,
          progressbar=frametitle]{metropolis}
    \definecolor{accent}{RGB}{51, 34, 136}
    \setbeamercolor{alerted text}{fg=accent}
    \makeatletter
        \setlength{\metropolis@progressinheadfoot@linewidth}{1pt}
    \makeatother
    % FIXME: not pretty and footnotes are still too big
    \let\footnoterule\relax  % No footnote rule, push down footnote

% 9-Highlights colour palette from [Paul Tol's technical note](https://personal.sron.nl/~pault/colourschemes.pdf)
\definecolor{highlight0}{RGB}{51, 34, 136}  % Deep blue
\definecolor{highlight1}{RGB}{136, 204, 238}  % Clear blue
\definecolor{highlight2}{RGB}{68, 170, 153}  % Teal
\definecolor{highlight3}{RGB}{17, 119, 51}  % Forest green
\definecolor{highlight4}{RGB}{153, 153, 51}  % Khaki
\definecolor{highlight5}{RGB}{221, 204, 119}  % Beige
\definecolor{highlight6}{RGB}{204, 102, 119}  % Pink
\definecolor{highlight7}{RGB}{136, 34, 85}  % Purple
\definecolor{highlight8}{RGB}{170, 68, 153}  % Violet

% Alternative navy blue for ⩽4 palettes
\definecolor{highlighta}{RGB}{68, 118, 170}  % Navy blue

% Use non-standard fonts
\usefonttheme{professionalfonts}
\setsansfont[BoldFont={Fira Sans SemiBold}, ItalicFont={Fira Sans Book Italic}]{Fira Sans Book}
\setmonofont[Scale=0.9]{Fira Mono}

% Fix missing glyphs in Fira by delegating to polyglossia/babel
\usepackage{newunicodechar}
\newunicodechar{ }{~}   % U+202F NARROW NO-BREAK SPACE
\newunicodechar{ }{ }  % U+2009 THIN SPACE

% Notes on left screen
% \usepackage{pgfpages}
% \setbeameroption{show notes on second screen=left}


\usepackage{polyglossia}
	\setmainlanguage{french}
    \setotherlanguage{english}

    % PATCH: fix spacing in monospaced text
    \usepackage{xpatch}
    \makeatletter
        \xapptocmd\ttfamily{\nofrench@punctuation}{}{}
    \makeatother

\usepackage{amsfonts,amssymb}
\usepackage{amsmath,amsthm}
\usepackage{mathtools}	% AMS Maths service pack
	\newtagform{brackets}{[}{]}	% Pour des lignes d'équation numérotées entre crochets
	\mathtoolsset{showonlyrefs, showmanualtags, mathic}	% affiche les tags manuels (\tag et \tag*) et corrige le kerning des maths inline dans un bloc italique voir la doc de mathtools
	\usetagform{brackets}	% Utilise le style de tags défini plus haut
\usepackage{lualatex-math}

\usepackage[math-style=french]{unicode-math}
	\setmathfont{XITS Math}
\usepackage{newunicodechar}
	\newunicodechar{√}{\sqrt}
\usepackage{mleftright}


\usepackage{tabu}
\usepackage{booktabs}
\usepackage{siunitx}
\usepackage{multicol}
\usepackage{ccicons}
\usepackage{bookmark}
\usepackage{caption}
    \captionsetup{skip=1ex}

\usepackage{csquotes}
\usepackage{tikz}
	\NewDocumentCommand{\textnode}{O{}mm}{\tikz[remember picture, baseline=(#2.base), inner sep=0pt]{\node[#1] (#2) {#3};}}
    \NewDocumentCommand{\mathnode}{O{}mm}{\tikz[remember picture, baseline=(#2.base), inner sep = 0pt]{\node[#1] (#2) {$\displaystyle #3$};}}
	\tikzset{
		alt/.code args={<#1>#2#3}{%
		\alt<#1>{\pgfkeysalso{#2}}{\pgfkeysalso{#3}} % \pgfkeysalso doesn't change the path
		},
        invisible/.style={opacity=0},
		visible on/.style={alt=<#1>{}{invisible}}
	}
	\usepackage{tikz-qtree}
    \usepackage{tkz-graph}
    \usepackage[beamer, markings]{hf-tikz}
    \usepackage{pgfplots}
        % Due to pgfplots meddling with pgfkeys, we have to redefine alt here.
        \pgfplotsset{
    		alt/.code args={<#1>#2#3}{%
    		\alt<#1>{\pgfkeysalso{#2}}{\pgfkeysalso{#3}} % \pgfkeysalso doesn't change the path
    		},
    	}
        \pgfplotsset{compat=1.15}
        \pgfplotsset{colormap={SRON}{rgb255=(61,82,161) rgb255=(255,250,210) rgb255=(174,28,62)}}

    \usetikzlibrary{matrix}
    \usetikzlibrary{shapes, shapes.geometric}
    \usetikzlibrary{decorations.pathreplacing}
	\usetikzlibrary{positioning, calc, intersections}
    \usetikzlibrary{fit}

    % Do evil things with soft path
    % From <https://tex.stackexchange.com/a/301364/8547>
    \makeatletter
        \def\@appendnamedsoftpath#1{%
            \pgfsyssoftpath@getcurrentpath\@temppatha
            \expandafter\let\expandafter\@temppathb\csname tikz@intersect@path@name@#1\endcsname
            \expandafter\expandafter\expandafter\def\expandafter\expandafter\expandafter\@temppatha\expandafter\expandafter\expandafter{\expandafter\@temppatha\@temppathb}%
            \pgfsyssoftpath@setcurrentpath\@temppatha
        }
        \def\@appendnamedpathforactions#1{%
            \pgfsyssoftpath@getcurrentpath\@temppatha
            \expandafter\let\expandafter\@temppathb\csname tikz@intersect@path@name@#1\endcsname
            \expandafter\def\expandafter\@temppatha\expandafter{\csname @temppatha\expandafter\endcsname\@temppathb}%
            \let\tikz@actions@path\@temppatha
        }

        \tikzset{
            use path for main/.code={%
                \tikz@addmode{%
                    \expandafter\pgfsyssoftpath@setcurrentpath\csname tikz@intersect@path@name@#1\endcsname
                }%
            },
            append path for main/.code={%
                \tikz@addmode{%
                    \@appendnamedsoftpath{#1}%
                }%
            },
            use path for actions/.code={%
                \expandafter\def\expandafter\tikz@preactions\expandafter{\tikz@preactions\expandafter\let\expandafter\tikz@actions@path\csname tikz@intersect@path@name@#1\endcsname}%
            },
            append path for actions/.code={%
                \expandafter\def\expandafter\tikz@preactions\expandafter{\tikz@preactions
                \@appendnamedpathforactions{#1}}%
            },
            use path/.style={%
                use path for main=#1,
                use path for actions=#1,
            },
            append path/.style={%
                append path for main=#1,
                append path for actions=#1
            }
        }
    \makeatother

    % TikZ externalisation
    \usetikzlibrary{external}
    % Create the `tikzpics/` folder if it does not exist
    \ShellEscape{mkdir tikzpics}
    % Only externalise pictures on demand (to avoid messing up with metropolis theme)
    \tikzset{
        external/export=false,
        external/prefix=tikzpics/
    }
    \tikzexternalize

\usepackage{listings}
\renewcommand{\lstlistingname}{Example}

    \makeatletter
    	\lstset{
    		basicstyle=\ttfamily\lst@ifdisplaystyle\footnotesize\fi,
    		columns=fullflexible,
    		showstringspaces=false,
    		commentstyle=\color{gray}\upshape
    	}
    \makeatother

	\lstdefinelanguage{XML}{
	    morestring=[s]{"}{"},
	    morecomment=[s]{?}{?},
	    morecomment=[s]{!--}{--},
	    moredelim=[s][\color{black}]{>}{<},
	    moredelim=[s][\color{highlight0}]{\ }{=},
	    stringstyle=\color{highlight3},
	    identifierstyle=\color{highlight7}
	}

\usepackage[style=authoryear, block=ragged, doi=false, isbn=false]{biblatex}
    \AtEveryBibitem{
        \ifentrytype{online}
        {} {
            \iffieldequalstr{howpublished}{online}
            {
                \clearfield{howpublished}
            } {
                \clearfield{urlyear}\clearfield{urlmonth}\clearfield{urlday}
            }
        }
    }

	\addbibresource{biblio.bib}

% Compact bibliography style
\setbeamertemplate{bibliography item}[text]

\AtEveryBibitem{
    \clearfield{series}
    \clearfield{pages}
    \clearlist{publisher}
    \clearname{editor}
    \clearlist{location}
}
\renewcommand*{\bibfont}{\tiny}

\usepackage{hyperxmp}	% XMP metadata

\usepackage[type={CC},modifier={by},version={4.0}]{doclicense}

\usepackage{todonotes}
\let\todox\todo
\renewcommand\todo[1]{\todox[inline]{#1}}

\title{\titlepagetitle}
\author{\textbf{\myname} (\mylab)}
\institute{}
\date{\conference\\\docdate}

\titlegraphic{\ccby}

% Tikz styles

% Schémas de tâches
\tikzset{
    >=stealth,
    data/.style={draw, ellipse},
    program/.style={draw, rectangle},
    accent on/.style={alt={#1{draw=accent, text=accent, thick}{draw}}},
    true scale/.style={scale=#1, every node/.style={transform shape}},
    highlight/.style={color=highlight#1}
}

% Styles des heatmap pour les moyennes
\pgfplotsset{
    meanheatmap/.style={
        colorbar, colormap name=SRON,
        view={0}{90},
        samples=100,
        domain=0:1,
        min=0, max=1,
        xlabel={$P$},
        ylabel={$R$},
    }
}

% Commands spécifiques
\NewDocumentCommand\shorturl{ O{https} O{://} m }{%
    \href{#1#2#3}{\nolinkurl{#3}}%
}

\DeclarePairedDelimiterX\compset[2]{\lbrace}{\rbrace}{#1\,\delimsize|\,#2}

% Easy colum vectors \vcord{a,b,c} ou \vcord[;]{a;b;c}
% Here be black magic
\ExplSyntaxOn
	\NewDocumentCommand{\vcord}{O{,}m}{\vector_main:nnnn{p}{\\}{#1}{#2}}
	\NewDocumentCommand{\tvcord}{O{,}m}{\vector_main:nnnn{psmall}{\\}{#1}{#2}}
	\seq_new:N\l__vector_arg_seq
	\cs_new_protected:Npn\vector_main:nnnn #1 #2 #3 #4{
		\seq_set_split:Nnn\l__vector_arg_seq{#3}{#4}
		\begin{#1matrix}
			\seq_use:Nnnn\l__vector_arg_seq{#2}{#2}{#2}
		\end{#1matrix}
	}
\ExplSyntaxOff

\DeclareMathOperator{\TF}{TF}
\DeclareMathOperator{\IDF}{IDF}


% ██████   ██████   ██████ ██    ██ ███    ███ ███████ ███    ██ ████████
% ██   ██ ██    ██ ██      ██    ██ ████  ████ ██      ████   ██    ██
% ██   ██ ██    ██ ██      ██    ██ ██ ████ ██ █████   ██ ██  ██    ██
% ██   ██ ██    ██ ██      ██    ██ ██  ██  ██ ██      ██  ██ ██    ██
% ██████   ██████   ██████  ██████  ██      ██ ███████ ██   ████    ██


\begin{document}
\pdfbookmark[2]{Title}{title}

\begin{frame}[plain]
	\titlepage
\end{frame}

\lecture{Introduction à la fouille de textes}{2018-01-15}
\begin{frame}{Informations pratiques}
    \begin{description}[*]
        \item[Où] Salle Benveniste, ILPGA, 9 Rue des Bernardins, 75005 Paris
        \item[Quand] Le lundi de 14h à 16h (voir le calendrier de Paris 3 pour les dates)
        \item[Contact] \shorturl[mailto][:]{loic.grobol@gmail.com}
        \item[Web] {\shorturl{loicgrobol.github.io/intro-fouille-textes}}
    \end{description}
\end{frame}

\begin{frame}{Organisation}
    \begin{description}[*]
        \item[Poly] À lire d'une fois sur l'autre :\\
                    {\footnotesize\shorturl[https]{loicgrobol.github.io/intro-fouille-textes/poly/poly.pdf}}
        \item[Cours] Exemples, exercices, expérimentations, explications
        \item[Évaluation] en contrôle continu
            \begin{description}
                \item[Partiel] en semaine 13 (2018-04-23) → \SI{50}{\percent}
                \item[Projet] → \SI{50}{\percent}
            \end{description}
    \end{description}
\end{frame}

\begin{frame}{Projet final}
    « Utiliser des programmes d'apprentissage automatique pour un tâche de classification de textes »
    \begin{itemize}
        \item Définir le sujet
        \item Constituer le corpus de travail
        \item Transformation du texte en données utilisables par Weka
        \item Expérimentations
        \item Compte-rendu
    \end{itemize}
\end{frame}

\begin{frame}{Weka ?}
    Une suite de logiciels pour l'apprentissage automatique avec une interface graphique
    \begin{itemize}
        \item \shorturl{www.cs.waikato.ac.nz/ml/weka}
        \item À installer dès que possible sur votre machine
        \item Si possible, venir avec votre PC portable pour pouvoir suivre les expérimentations en cours
    \end{itemize}
\end{frame}

% ██ ███    ██ ████████ ██████   ██████  ██████  ██    ██  ██████ ████████ ██  ██████  ███    ██
% ██ ████   ██    ██    ██   ██ ██    ██ ██   ██ ██    ██ ██         ██    ██ ██    ██ ████   ██
% ██ ██ ██  ██    ██    ██████  ██    ██ ██   ██ ██    ██ ██         ██    ██ ██    ██ ██ ██  ██
% ██ ██  ██ ██    ██    ██   ██ ██    ██ ██   ██ ██    ██ ██         ██    ██ ██    ██ ██  ██ ██
% ██ ██   ████    ██    ██   ██  ██████  ██████   ██████   ██████    ██    ██  ██████  ██   ████


\section*{Introduction}

\begin{frame}{La fouille de données}
    Tout commença dans les années 90…
    \begin{itemize}
        \item Généralisation des ordinateurs personnels
        \item Augmentation de leurs capacités de mémorisation et de traitement
        \item[→] Il devient possible de traiter rapidement de grandes quantités d'informations
    \end{itemize}
    Le terme \alert{fouille de données} désigne l'ensemble des techniques permettant de prendre des décisions pertinentes à partir de l'analyse de données massives.
\end{frame}

\begin{frame}{La fouille de données}
    Intéressant et rentable
    \begin{itemize}
        \item Pour les banques et les assurances
            \begin{itemize}
                \item[→] Fiabilité d'un crédit, d'une garantie…
            \end{itemize}
        \item Pour la médecine
            \begin{itemize}
                \item[→] Efficacité d'un traitement, propagation d'une épidémie…
            \end{itemize}
        \item Pour la vente et le marketing
            \begin{itemize}
                \item[→] Cibler des publicités, étudier un marché…
            \end{itemize}
        \item …
    \end{itemize}
\end{frame}

\begin{frame}{Particularités innovantes}
    Par rapport à l'IA traditionnelle, on privilégie
    \begin{itemize}
        \item \alert{La masse de données} plutôt que les compétences expertes
        \item \alert{Les méthodes numériques} plutôt que symboliques
        \item Une démarche \alert{inductive} plutôt que déductive
    \end{itemize}
    Et cette tendance se généralise depuis à l'ensemble des domaines de l'informatique.

    À lire : \citetitle{church2011pendulum} \parencite{church2011pendulum}
\end{frame}

\begin{frame}{La fouille de textes}
    Applications de la fouille de données au TAL et vice-versa pour le traitement des données linguistiques massives.

    \begin{itemize}
        \item Le web 2.0 se démocratise au même moment
        \item C'est une formidable source de données linguistiques
        \item Mais elles sont en général spontanées et potentiellement mal formées
    \end{itemize}

    Et le TAL traditionnel, et en particulier
    \begin{itemize}
        \item Automates
        \item Grammaires formelles
        \item Représentations logiques
    \end{itemize}
    ne sont pas adaptées.
\end{frame}

\begin{frame}{Un changement de paradigme}
    En fouille de textes, par rapport au TAL traditionnel
    \begin{itemize}
        \item On privilégie les analyses de surface
        \item On s'appuie sur la quantité des données pour compenser leur hétérogénéité
        \item On réduit les ambitions : pas question d'accéder au sens profond des textes
    \end{itemize}

    L'objectif est de traiter efficacement quelques \alert{tâches} précises et limitées.
\end{frame}

\begin{frame}{Sommaire}
    La suite de ce cours est articulée en deux parties
    \begin{itemize}
        \item Les tâches élémentaires de la fouille de textes
         \begin{itemize}
             \item Qu'est-ce qu'une tâche ?
             \item Quelles sont les tâches élémentaires ?
             \item Combiner des tâches élémentaires
         \end{itemize}
        \item Une tâche particulière : la classification de textes
    \end{itemize}
\end{frame}

% ████████  █████   ██████ ██   ██ ███████ ███████
%    ██    ██   ██ ██      ██   ██ ██      ██
%    ██    ███████ ██      ███████ █████   ███████
%    ██    ██   ██ ██      ██   ██ ██           ██
%    ██    ██   ██  ██████ ██   ██ ███████ ███████

\section{Les tâches élémentaires de la fouille de textes}

\subsection{Notion de tâche}

\begin{frame}{Introduction}
    On traite du concept de \textit{tâche} au sens de l'informatique : spécification d'un programme qui mime une compétence humaine précise.

    \begin{itemize}
        \item Définition très large
            \begin{itemize}
                \item[→] « Tenir une conversation par écrit en se faisant passer pour un être humain » convient
            \end{itemize}
        \item En pratique on a des ambitions plus modestes
        \item Mais on est encore loin de les satisfaire !
         \begin{itemize}
             \item Notre mesure du succès est « s'approcher le plus possible d'une solution de référence validée par un humain »
         \end{itemize}
    \end{itemize}
 \end{frame}

\begin{frame}{Caractérisation}
    \begin{itemize}
        \item Chaque tâche a une visée applicative précise et autonome
        \item Elle est caractérisée par ses entrées, ses sorties et les ressources auxquelles elle fait appel
    \end{itemize}

    \begin{figure}
        \tikzset{external/export=true}
        \begin{tikzpicture}
            \node[data] (in) {Entrée};
            \node[program, right=1cm of in, text width=10ex] (prog) {Programme réalisant la tâche};
            \node[data, right=1cm of prog] (out) {Résultat};
            \draw[->] (in) -- (prog);
            \draw[->] (prog) -- (out);
        \end{tikzpicture}
    \end{figure}

    On peut considérer chaque tâche comme une boîte noire : la façon dont le programme fonctionne ne nous intéresse pas ici.
\end{frame}

\begin{frame}{Quelques exemples de tâches}
    \begin{enumerate}
        \item Détecter les spams dans un ensemble d'emails
        \item Trouver dans le catalogue d'une bibliothèque de ouvrages qui traitent de l'art macabre au XVème siècle
        \item Trouver un site internet qui vend des ordinateurs portable sans système d'exploitation
        \item Déterminer le nom du héros et des principaux protagonistes d'un texte narratif
        \item Découper la transcription d'un discours en parties thématiques
        \item Déterminer les symptômes présentés par un patient à partir d'un rapport clinique
        \item Repérer dans un ensemble de tweets ceux qui sont sarcastiques ou ironiques
    \end{enumerate}
\end{frame}

\begin{frame}[fragile]{Schéma général d'une tâche}
    \begin{figure}
        \tikzset{external/export=true}
        \begin{tikzpicture}
            \node[ellipse, accent on=<2>] (in) {Entrée};
            \node[right=1cm of in, text width=10ex, accent on=<3>] (prog) {Programme réalisant la tâche};
            \node[ellipse, accent on=<2>, right=1cm of prog] (out) {Résultat};
            \node[ellipse, accent on=<2>, below=1cm of prog] (res) {Ressources};
            \draw[->] (in) -- (prog);
            \draw[->] (prog) -- (out);
            \draw[->] (res) -- (prog);
        \end{tikzpicture}
        \caption{Schéma général d'une tâche}
    \end{figure}
    \only<2->{
    Dans ce schéma
        \begin{itemize}
            \item<2-> Les \alert<2>{données} sont figurées par des ellipses.
            \item<3-> Le \alert<3>{programme} réalisant la tâche est figuré par un rectangle.
        \end{itemize}
    }
\end{frame}

\begin{frame}{Entrées ou ressources ?}
    Le critère qu'on retiendra en pratique est la mutabilité
    \begin{itemize}
        \item Une ressource est une donnée stable qui n'est pas modifiée entre deux exécutions du programme
        \item Une donnée d'entrée change à chaque exécution du programme
    \end{itemize}
\end{frame}

\begin{frame}{Exemples}
    Pour les tâches suivantes, identifier entrées et sorties et proposer des ressources
    \begin{enumerate}
        \item Détecter les spams dans un ensemble d'emails
        \item Déterminer le nom du héros et des principaux protagonistes d'un texte narratif
        \item Découper la transcription d'un discours en parties thématiques
        \item Repérer dans un ensemble de tweets ceux qui sont sarcastiques ou ironiques
    \end{enumerate}
\end{frame}

% ██████   ██████  ███    ██ ███    ██ ███████ ███████
% ██   ██ ██    ██ ████   ██ ████   ██ ██      ██
% ██   ██ ██    ██ ██ ██  ██ ██ ██  ██ █████   ███████
% ██   ██ ██    ██ ██  ██ ██ ██  ██ ██ ██           ██
% ██████   ██████  ██   ████ ██   ████ ███████ ███████


\begin{frame}{Données}
    On peut regrouper grossièrement les données utilisées en fouille de texte dans trois catégories
    \begin{itemize}
        \item Les données tabulaires
        \item Les textes bruts
        \item Les documents semi-structurés
    \end{itemize}
\end{frame}

\begin{frame}{Données tabulaires}
    \begin{figure}
        \includegraphics<1>[width=\textwidth, height=0.75\textheight, keepaspectratio]{pics/tab_weka.png}
        \includegraphics<2>[width=\textwidth, height=0.4\textheight, keepaspectratio]{pics/tab_weka.png}
        \caption{Données tabulaires dans Weka}
    \end{figure}
    \alt<1>{
        \vspace{-1\baselineskip}
        {\tiny Exemple Weka \texttt{weater.numeric} : peut-on jouer au tennis aujourd'hui ?}
    }{
        C'est le type de données traditionnellement utilisé en fouille de données
        \begin{itemize}
            \item L'ordre des lignes est arbitraire
            \item L'ordre des colonnes est arbitraire, sauf éventuellement pour la dernière
        \end{itemize}
    }
\end{frame}

\begin{frame}[fragile=singleslide]{Textes bruts}
    \begin{figure}
        \begin{lstlisting}[gobble=12, basicstyle=\ttfamily\small]
            et comment est-ce qu'on fait une omelette est-ce que vous
            pourriez m'expliquer
            comment on fait une omelette ?
            ah une omelette oui bien sûr
            je casse des oeufs
            oui oui
            je les mets dans un récipient
            je mets du sel et du poivre directement
            je bats bon je prépare ma poêle je mets du beurre hein ?
        \end{lstlisting}
        \caption{Exemple de texte brut}
    \end{figure}
    \vskip0pt plus 1fill
    {\tiny Extrait du corpus ANCOR \parencite{muzerelle2013ANCOR}}
\end{frame}

\begin{frame}{Textes bruts}
    \alert{Tous} les caractères représentables sont susceptibles d'en faire partie
    \begin{figure}
        \includegraphics[width=\textwidth, height=0.8\textheight, keepaspectratio]{pics/raw_emoji.png}
        \caption{Texte brut avec caractères spéciaux}
    \end{figure}
    \vskip0pt plus 1fill
    {\tiny @Biolojical@twitter : \shorturl{twitter.com/biolojical/status/949344635310059520}}
\end{frame}

\begin{frame}[fragile=singleslide]{Documents semi-structuré}
    Cas typique : XML et HTML
    \begin{figure}
        \begin{lstlisting}[gobble=12, language=XML]
            <table>
                <tr><th>produit</th><th>marque</th><th>prix en euros</th></tr>
                <tr><td>ordinateur portable</td><td>truc</td><td>800</td></tr>
                <tr><td>tablette</td><td>machin</td><td>200</td></tr>
            </table>
        \end{lstlisting}
        \caption{HTML vu comme texte brut}
    \end{figure}
    On peut le considérer comme du texte brut où chaque balise (\lstinline[language=XML]{<td>}, \lstinline[language=XML]{</tr>}…) compte comme un seul caractère.
\end{frame}

\begin{frame}[fragile=singleslide]{Documents semi-structuré}
    On peut aussi le considérer comme un arbre
    \begin{figure}
        \tikzset{external/export=true}
        \begin{tikzpicture}[font=\tiny]
            \tikzset{level distance=2em, sibling distance=1ex}

            \Tree[.{\lstinline[language=XML]{<table>}}
                [.{\lstinline[language=XML]{<tr>}}
                    [.{\lstinline[language=XML]{<th>}} produit ]
                    [.{\lstinline[language=XML]{<th>}} marque ]
                    [.{\lstinline[language=XML]{<th>}} {prix en euros} ]
                ]
                [.{\lstinline[language=XML]{<tr>}}
                    [.{\lstinline[language=XML]{<td>}} {ordinateur portable} ]
                    [.{\lstinline[language=XML]{<td>}} truc ]
                    [.{\lstinline[language=XML]{<td>}} 800 ]
                ]
                [.{\lstinline[language=XML]{<tr>}}
                    [.{\lstinline[language=XML]{<td>}} tablette ]
                    [.{\lstinline[language=XML]{<td>}} machin ]
                    [.{\lstinline[language=XML]{<td>}} 200 ]
                ]
            ]
        \end{tikzpicture}
        \caption{HTML vu comme un arbre}
    \end{figure}
\end{frame}

\begin{frame}{Documents semi-structurés}
    Et ils admettent dans certains cas des représentations supplémentaires
    \begin{figure}
        \includegraphics[width=\textwidth, height=0.8\textheight, keepaspectratio]{pics/html_firefox.png}
        \caption{Représentation du code précédent dans un navigateur}
    \end{figure}
    \vskip0pt plus 1fill
    {\tiny Représentation standard dans Mozilla Firefox \shorturl{www.mozilla.org/firefox/}}
\end{frame}

% ██████  ███████ ███████ ███████  ██████  ██    ██ ██████   ██████ ███████ ███████
% ██   ██ ██      ██      ██      ██    ██ ██    ██ ██   ██ ██      ██      ██
% ██████  █████   ███████ ███████ ██    ██ ██    ██ ██████  ██      █████   ███████
% ██   ██ ██           ██      ██ ██    ██ ██    ██ ██   ██ ██      ██           ██
% ██   ██ ███████ ███████ ███████  ██████   ██████  ██   ██  ██████ ███████ ███████


\begin{frame}{Les ressources}
    \begin{quote}
        {\only<2>{\small}Toute donnée ou programme disponible pendant l'exécution d'un programme peut être qualifiée de \emph{ressource}.}
    \end{quote}
        \only<2>{
            \begin{itemize}
                \item Listes
                    \begin{itemize}
                        \item[→] mots, caractères…
                    \end{itemize}
                \item Corpus
                \item Bases de connaissances
                    \begin{itemize}
                        \item[→] bases de données, ontologies, lexiques, wordnets…
                    \end{itemize}
                \item Programmes de pré-traitement
                    \begin{itemize}
                        \item[→] segmentation, normalisation…
                    \end{itemize}
                \item Programmes réalisant des traitements linguistiques poussés
                    \begin{itemize}
                        \item[→] lemmatisation, étiquetage morphosyntaxique…
                    \end{itemize}
            \end{itemize}
        }
\end{frame}

\begin{frame}{Quelques ressources linguistiques}
    \begin{itemize}
        \item Le Lexique Extensionnel des Formes Fléchies du Français (Lefff)
            \begin{itemize}
                \item[→] \shorturl[http]{almanach.inria.fr/~sagot/lefff.html}
            \end{itemize}
        \item La base de connaissances structurée Wikidata
            \begin{itemize}
                \item[→] \shorturl{www.wikidata.org}
            \end{itemize}
        \item Le segmenteur/étiqueteur/parser UDPipe
            \begin{itemize}
                \item[→] \shorturl{ufal.mff.cuni.cz/udpipe}
            \end{itemize}
        \item Le corpus arboré pour le français (French Treebank)
            \begin{itemize}
                \item[→] \shorturl[http]{ftb.linguist.univ-paris-diderot.fr}
            \end{itemize}
        \item Le réseau lexical JeuxDeMots
            \begin{itemize}
                \item[→] \shorturl{www.jeuxdemots.org/jdm-about.php}
            \end{itemize}
    \end{itemize}
\end{frame}

% ██████  ██████   ██████   ██████  ██████   █████  ███    ███ ███    ███ ███████ ███████
% ██   ██ ██   ██ ██    ██ ██       ██   ██ ██   ██ ████  ████ ████  ████ ██      ██
% ██████  ██████  ██    ██ ██   ███ ██████  ███████ ██ ████ ██ ██ ████ ██ █████   ███████
% ██      ██   ██ ██    ██ ██    ██ ██   ██ ██   ██ ██  ██  ██ ██  ██  ██ ██           ██
% ██      ██   ██  ██████   ██████  ██   ██ ██   ██ ██      ██ ██      ██ ███████ ███████


\begin{frame}{Programmes}
    Première option : programmes « écrits à la main »
    \begin{itemize}
        \item Reposent sur des connaissances expertes
        \item Adaptés dans des contextes stables et non-adverses
        \item Peu de robustesse aux changements et à l'hétérogénéité
        \item Dans un contexte adverse (e.g. spam vs. anti-spam), gare à la course de la reine rouge !
    \end{itemize}
    Attention : ça ne signifie pas que c'est une impasse !
    \begin{itemize}
        \item[→] FRMG (\shorturl[http]{alpage.inria.fr/frmgwiki/})
    \end{itemize}
\end{frame}

\begin{frame}[fragile=singleslide]{Programmes}
    Deuxième option : apprentissage automatique
    \begin{figure}
        \tikzset{external/export=true}
        \begin{tikzpicture}[scale=0.9, every node/.style={transform shape}]
            \node[data] (in) {Entrée};
            \node[program, highlight=0, right=.75cm of in, text width=10ex] (prog) {Programme réalisant la tâche};
            \node[data, right=.75cm of prog] (out) {Résultat};
            \node[program, highlight=6, above=1cm of prog, text width=13ex] (progapp) {Programme d'apprentissage};
            \node[data, highlight=3, right=.75cm of progapp] (mod) {Modèle};
            \node[data, highlight=7, left=.75cm of progapp] (train) {Exemples};
            \draw[->] (in) -- (prog);
            \draw[->] (prog) -- (out);
            \draw[->] (mod) |- ($(prog.north)+(0, 0.5cm)$) -| (prog.north);
            \draw[->] (train) -- (progapp);
            \draw[->] (progapp) -- (mod);
        \end{tikzpicture}
        \caption{Schéma d'une approche par apprentissage automatique}
    \end{figure}
    Ici le \textcolor{highlight0}{programme réalisant la tâche} est générique, mais utilise comme ressource un \textcolor{highlight3}{modèle} généré par un \textcolor{highlight6}{programme d'entraînement} à partir d'\textcolor{highlight7}{exemples} produit par des humains.
\end{frame}

\begin{frame}{Apprentissage automatique}
    Avantages
    \begin{itemize}
        \item Peut utiliser des données d'apprentissage génériques
            \begin{itemize}
                \item[→] Permet de concentrer les besoins en connaissances expertes
            \end{itemize}
        \item En général plus robustes aux données irrégulières et à l'hétérogénéité
        \item Plus facilement transférable (e.g. d'une langue à une autre)
    \end{itemize}
    Inconvénients
    \begin{itemize}
        \item Parfois trop peu explicite (surtout en \textit{Deep Learning})
        \item Dépend beaucoup de la qualité des données d'entraînement
    \end{itemize}
\end{frame}

\lecture{Introduction à la fouille de textes}{2018-01-22}
\begin{frame}{Quelques exemples}
    Quelques exemples de programmes issus d'apprentissage automatique
    \begin{itemize}
        \item SEM (POS tagging, chunking, détection d'entités nommées)
            \begin{itemize}
                \item[→] \shorturl{apps.lattice.cnrs.fr/sem}
            \end{itemize}
        \item UDPipe (segmenteur/étiqueteur/parser)
            \begin{itemize}
                \item[→] \shorturl{ufal.mff.cuni.cz/udpipe}
            \end{itemize}
        \item Google translate (traduction)
            \begin{itemize}
                \item[→] \shorturl{translate.google.com}
            \end{itemize}
        \item Deep summarization (résumé de review Amazon)
            \begin{itemize}
                \item[→] \shorturl{github.com/harpribot/deep-summarization}
            \end{itemize}
        \item @picdescbot (description d'images en langage naturel\textsuperscript{1})
            \begin{itemize}
                \item[→] \shorturl{twitter.com/picdescbot}
            \end{itemize}
    \end{itemize}
    \vskip0pt plus 1fill
    {\tiny 1. Encore plus fort : \citetitle{alishahi2017encoding} \parencite{alishahi2017encoding}}
\end{frame}

% ███████ ██    ██  █████  ██      ██    ██  █████  ████████ ██  ██████  ███    ██
% ██      ██    ██ ██   ██ ██      ██    ██ ██   ██    ██    ██ ██    ██ ████   ██
% █████   ██    ██ ███████ ██      ██    ██ ███████    ██    ██ ██    ██ ██ ██  ██
% ██       ██  ██  ██   ██ ██      ██    ██ ██   ██    ██    ██ ██    ██ ██  ██ ██
% ███████   ████   ██   ██ ███████  ██████  ██   ██    ██    ██  ██████  ██   ████


\begin{frame}{Évaluation et d'apprentissage}
    Objectif : comparer \alert{objectivement} des programmes réalisant une même tâche
    \begin{itemize}
        \item Doit se faire avec exactement les mêmes données
            \begin{itemize}
                \item Ressources et entrées !
            \end{itemize}
        \item[→] Établissement de données de référence \alert{\textit{Gold Standard}}
            \begin{itemize}
                \item[→] MetaTreebank Universal Dependencies \shorturl[http]{universaldependencies.org}
                \item[→] OntoNotes \shorturl{catalog.ldc.upenn.edu/LDC2013T19}
            \end{itemize}
        \item On met ensuite en concurrence les programmes sur ces données → challenge/shared task
            \begin{itemize}
                \item[→] CoNLL 2017 \shorturl[http]{universaldependencies.org/conll17}
                \item[→] \alert{DEFT} \shorturl{deft.limsi.fr}
            \end{itemize}
    \end{itemize}
\end{frame}

\begin{frame}{\textit{Train} et \textit{test}}
    L'évaluation d'un système ne se fait pas sur le jeu de données de développement
    \begin{itemize}
        \item Sinon une simple mémorisation suffit !
        \item On sépare le \textit{Gold Standard} en une partie \alert{\textit{train}} et une partie \alert{\textit{test}}
        \item Dans le cas d'une campagne d'évaluation, le \textit{test} est souvent tenu secret
            \begin{itemize}
                \item[→] Voir par exemple la \textit{shared task CoNLL 2017 pour un exemple sophistiqué}
            \end{itemize}
        \item[→] Valable y compris pour les programmes non-appris !
        \item On ajoute aussi parfois un ensemble dit « de développement »
        \item Classiquement \SI{80}{\percent}/\SI{10}{\percent}/\SI{10}{\percent}
    \end{itemize}
\end{frame}

\begin{frame}[fragile]{Validation croisée}
    Le découpage train/dev/test ajoute de l'objectivité et est facile à mettre en œuvre mais
    \begin{itemize}
        \item Il prive d'une partie des données → sous-performance
        \item Il induit un biais lié au découpage si celui-ci est fixe
    \end{itemize}

    Pour y limiter cet effet, on utilise parfois la méthode de validation croisée
    \begin{itemize}
        \item<1-> On découpe le corpus en $n$ parties de taille égales
        \item<2-> On utilise $n-1$ parties comme \textcolor{highlight0}{\textit{train}} et la dernière comme \textcolor{highlight6}{\textit{test}}
        \item<3-> On répète l'opération pour les $n$ combinaisons possibles
        \item<12-> On retient comme évaluation globale une moyenne des résultats
    \end{itemize}
    \begin{center}
        \tikzset{external/export=true}
        \begin{tikzpicture}[scale=0.7]
            \foreach \x in {2, ..., 11}
                \draw[alt=<\x>{fill=highlight6}{{alt=<1,12>{}{fill=highlight0}}}]
                    (\x-2, 0) -- ++(1, 0) -- ++(0, 1) -- ++(-1, 0) -- ++(0, -1) -- cycle;
        \end{tikzpicture}
    \end{center}
\end{frame}

\begin{frame}{Tâches élémentaires}
    Parmi l'ensemble des tâches, possible, certaines paraissent plus naturellement élémentaires
    \begin{itemize}
        \item Par leur relative simplicité de description
        \item Par leur capacité, en se combinant, à décrire une grande partie des autres tâches
    \end{itemize}

    Il s'agit de
        \begin{itemize}
            \item la recherche d'information (RI)
            \item la classification
            \item l'annotation
            \item l'extraction d'information (EI)
        \end{itemize}
\end{frame}

% ██████  ██
% ██   ██ ██
% ██████  ██
% ██   ██ ██
% ██   ██ ██


\subsection{La recherche d'information}

\begin{frame}[fragile=singleslide]{Recherche d'information}
    La \emph{Recherche d'Information} est la tâche consistant à trouver dans un corpus des documents \alert{pertinents} étant donnée une requête
    \begin{itemize}
        \item « Trouver dans le catalogue d'une bibliothèque de ouvrages qui traitent de l'art macabre au XVème siècle »
        \item « Trouver un site internet qui vend des ordinateurs portable sans système d'exploitation »
    \end{itemize}
    \begin{figure}
        \tikzset{external/export=true}
        \begin{tikzpicture}[true scale=0.80]
            \node[data, highlight=4] (in) {Requête};
            \node[program, right=1cm of in, text width=15ex] (prog) {Programme de RI};
            \node[data, right=1cm of prog] (out) {documents};
            \node[data, below=.6cm of prog, highlight=1] (res) {Corpus};
            \draw[->] (in) -- (prog);
            \draw[->] (prog) -- (out);
            \draw[->] (res) -- (prog);
        \end{tikzpicture}
    \end{figure}
    \vskip-1ex
    \begin{itemize}
        \item Le \textcolor{highlight1}{corpus} est une ressource obligatoire
        \item La \textcolor{highlight4}{requête} n'est \emph{pas} faite en langage fortement structuré (type SPARQL)
    \end{itemize}
\end{frame}

\begin{frame}{Domaines d'application}
    Globalement tous les moteurs de recherche
    \begin{itemize}
        \item Web : Qwant, Duckduckgo, Framabee, Google…
        \item Site : tous les sites avec une fonction de recherche (e.g. sites marchands)
        \item Documentaires : en bibliothèques, archives…
        \item …
    \end{itemize}
    Mais aussi les détecteurs de similarité
    \begin{itemize}
        \item Détection de plagiat e.g. Compilatio (\shorturl{compilatio.net})
        \item Détection de doublons e.g. sur le réseau StackExchange
    \end{itemize}
    Note : avoir défini précisément ce que « pertinent » veut dire n'est pas forcément nécessaire ! Il suffit d'avoir défini un \textit{Gold}.
\end{frame}

% WARNING: Here be dragons
\begin{frame}[fragile]{Évaluation : préliminaires}
    \begin{figure}
        \tikzset{external/export=true}
        \begin{tikzpicture}[fill opacity=0.5, text opacity=1,
                            alt=<1>{true scale=0.9}{true scale=0.75}]
            \draw[name path=D]
                (-6,-2) rectangle (6,2)
                node [above left] {$D$ : ensemble de tous les documents};
            \draw[alt={<1,6>{fill=highlight2, text=highlight2}{}}, name path=P]
                (-1, 0) circle [x radius=2, y radius=1, rotate=30]
                node[below left=1.3 and .15] {$P$ : documents pertinents};
            \draw[alt={<1,6>{fill=highlight4, text=highlight4}{}}, name path=R]
                (1, 0) circle [x radius=2, y radius=1.5]
                node[above right=1.5 and 0.1] {$R$ : documents retournés};
            \begin{scope}[alt=<2-4>{even odd rule}{}]
                \clip[alt=<2-3>{use path=P}{use path=R},
                      alt=<3-5>{append path=D}{}];
                \only<5>{\clip[use path=P, append path=D];}
                \path[alt={<2,5>{fill=highlight3}{}},
                      alt={<3,4>{fill=highlight6}{}},
                      alt=<2-3>{use path=R}{use path=P},
                      alt=<5>{use path=D}];
            \end{scope}
        \end{tikzpicture}
        \caption{Représentation de l'ensemble des documents}
    \end{figure}
    \only<2->{
        On définit les indicateurs suivants
        \begin{tabu}{|*{3}{X[m,c]|}}
            \hline
                & \uncover<2,3,6>{\textcolor{highlight4}{Retournés}}   & \uncover<4,5,6>{Non-retournés}\\
            \hline
            \uncover<2,4,6>{\textcolor{highlight2}{Pertinents}}    & \uncover<2,6>{\textcolor{highlight3}{Vrais positifs $P∩R$}}    & \uncover<4,6>{\textcolor{highlight6}{Faux négatifs $P\smallsetminus R$}}\\
            \hline
            \uncover<3,5,6>{Non-pertinents}    & \uncover<3,6>{\textcolor{highlight6}{Faux positifs $R\smallsetminus P$}} & \uncover<5,6>{\textcolor{highlight3}{Vrais négatifs $D\smallsetminus(P∪R)$}}\\
            \hline
        \end{tabu}
    }
\end{frame}

\begin{frame}{Évaluation}
    Les mesures d'évaluations usuelles rendent compte de façon synthétique du tableau précédent pour une expérience de RI
    \begin{description}
        \item[La précision] $P=\frac{VP}{VP+FP}$ « combien de documents retournés sont réellement pertinents ? »
        \item[Le rappel] $R=\frac{VP}{VP+FN}$ « parmi les documents pertinents, combien ont été trouvés ? »
        \item[La F-mesure] $F=2×\frac{P×R}{P+R}$ est la moyenne harmonique\textsuperscript{1} des deux précédentes
    \end{description}
    \vskip0pt plus 1fill
    {\tiny Exactement $F=\frac{2}{\frac{1}{P}+\frac{1}{R}}=2×\frac{P×R}{P+R}$}
\end{frame}

\begin{frame}[fragile=singleslide]{Exemples}
    Déterminer $P$, $R$ et $F$ dans les cas suivants
    \begin{itemize}
        \item $VP=1$, $VN=0$, $FP=1$, $FN=1$
        \item $VP=100$, $VN=50$, $FP=20$, $FN=15$
        \item \mbox{}\\
            {
                \tikzset{external/export=true}
                \begin{tikzpicture}[fill opacity=0.5, true scale=0.7, text opacity=1]
                    \draw[name path=D]
                        (-6,-2) rectangle (6,2)
                        node [above left] {$D$};
                    \draw[fill=highlight2, text=highlight2]
                        (-1.5, -0.25) node[text=black] {$15$} circle [x radius=2.5, y radius=1, rotate=20]
                        node[below left=1.1 and .15] {$P$ };
                    \draw[fill=highlight4, text=highlight4]
                        (1.5, 0) node[text=black] {$10$ }circle [x radius=2.5, y radius=1.7]
                        node[above right=1.5 and 0.5] {$R$};
                    \node at (0, 0) {$40$};
                    \node at (5.5, 1.5) {$2713$};
                \end{tikzpicture}
            }
    \end{itemize}
\end{frame}

\begin{frame}{Questions}
    \begin{enumerate}
        \item $P$, $R$ et $F$ dépendent-elles de la taille de $D$ ?
        \item Donner une méthode pour avoir à coup sûr $R=1$
        \item Donner une méthode pour avoir à coup sûr $P=1$
        \item Dans ces cas, que faut $F$ ? Et que vaudrait la moyenne arithmétique de $P$ et $R$.
    \end{enumerate}
\end{frame}

\lecture{Introduction à la fouille de textes}{2018-01-29}

\begin{frame}[fragile]{Aparté : moyennes}
    \begin{onlyenv}<1>
        \begin{figure}
            \tikzset{external/export=true}
            \begin{tikzpicture}
                \begin{axis}[meanheatmap]
                    \addplot3[surf, shader=interp]
                        {2*(x*y)/(x+y)};
                \end{axis}
            \end{tikzpicture}
        \caption{Moyenne harmonique de $P$ et $R$ : $2×\frac{P×R}{P+R}$}
        \end{figure}
    \end{onlyenv}
    \begin{onlyenv}<2>
        \begin{figure}
            \tikzset{external/export=true}
            \begin{tikzpicture}
                \begin{axis}[meanheatmap]
                    \addplot3[surf, shader=interp]
                        {(x+y)/2};
                \end{axis}
            \end{tikzpicture}
            \caption{Moyenne arithmétique de $P$ et $R$ : $\frac{P+R}{2}$}
        \end{figure}
    \end{onlyenv}
    \begin{onlyenv}<3>
        \begin{figure}
            \tikzset{external/export=true}
            \begin{tikzpicture}
                \begin{axis}[meanheatmap]
                    \addplot3[surf, shader=interp]
                        {(sqrt(x*y))};
                \end{axis}
            \end{tikzpicture}
        \caption{Moyenne géométrique de $P$ et $R$ : $√{P×R}$}
        \end{figure}
    \end{onlyenv}
    \begin{onlyenv}<4>
        \begin{figure}
            \tikzset{external/export=true}
            \begin{tikzpicture}
                \begin{axis}[meanheatmap]
                    \addplot3[surf, shader=interp]
                        {sqrt((x*x+y*y)/2)};
                \end{axis}
            \end{tikzpicture}
        \caption{Moyenne quadratique de $P$ et $R$ : $√{\frac{P²+R²}{2}}$}
        \end{figure}
    \end{onlyenv}
\end{frame}

\begin{frame}[fragile]{F-scores généralisés}
    \begin{columns}
    \alt<1>{\column{\textwidth}}{\column{0.45\textwidth}}
        \begin{figure}
            \tikzset{external/export=true}
            \begin{tikzpicture}[alt=<2>{true scale=0.5}{}]
                \begin{axis}[meanheatmap]
                    \addplot3[surf, shader=interp]
                        {(x*y*(1+0.5^2))/(y+x*0.5^2)};
                \end{axis}
            \end{tikzpicture}
        \caption{$F_β$ ($β=0.5$)}
        \end{figure}
    \only<2>{
        \column{0.45\textwidth}
        \vspace{\baselineskip}
        L'idée est de pondérer la moyenne harmonique
        \begin{align}
            F_{λ, μ}(P, R)
                &= \frac{λ+μ}{\frac{λ}{P}+\frac{μ}{R}}\\
                & (λ+μ) \frac{P×R}{λP + μR}\\
                &= \frac{λ+μ}{μ} \frac{P×R}{\underbrace{\frac{λ}{μ}}_{β²}P + R}\\
                &= (1+β²)\frac{P×R}{β²P + R}
        \end{align}
    }
    \end{columns}
    La F-mesure est simplement le cas $β=1$.
\end{frame}

%  ██████ ██       █████  ███████ ███████ ██ ███████
% ██      ██      ██   ██ ██      ██      ██ ██
% ██      ██      ███████ ███████ ███████ ██ █████
% ██      ██      ██   ██      ██      ██ ██ ██
%  ██████ ███████ ██   ██ ███████ ███████ ██ ██


\subsection{La classification}

\begin{frame}[fragile=singleslide]{Classification}
    La \emph{classification} est la tâche consistant à \alert{répartir} des données dans un ensemble de classes.
    \begin{itemize}
        \item « Détecter les spams dans un ensemble d'emails »
        \item « Repérer dans un ensemble de tweets ceux qui sont sarcastiques ou ironique »
        \item « Classer un ensemble de textes par genre littéraire »
    \end{itemize}
    \begin{figure}
        \tikzset{external/export=true}
        \begin{tikzpicture}[true scale=0.80]
            \node[data, highlight=4] (in) {Donnée};
            \node[program, right=1cm of in, text width=15ex] (prog) {Programme de classification};
            \node[data, right=1cm of prog] (out) {Classe};
            \node[data, below=.6cm of prog, highlight=8] (res) {Classes};
            \draw[->] (in) -- (prog);
            \draw[->] (prog) -- (out);
            \draw[->] (res) -- (prog);
        \end{tikzpicture}
    \end{figure}
    \begin{itemize}
        \item Les \textcolor{highlight8}{classes} sont connus à l'avance
        \item Chaque \textcolor{highlight4}{donnée} appartient à une classe.
    \end{itemize}
\end{frame}

\begin{frame}{Domaines d'application}
    \begin{itemize}
        \item Classification par type de document
            \begin{itemize}
                \item[→] DEFT 2018 tâche 1 (\shorturl{deft.limsi.fr/2018})
            \end{itemize}
        \item Classification par opinion/sentiment
            \begin{itemize}
                \item[→] DEFT 2018 tâche 2
            \end{itemize}
        \item Classification par qualité
            \begin{itemize}
                \item[→] \shorturl{www.youtube.com/watch?v=anwy2MPT5RE}
            \end{itemize}
        \item[…]
    \end{itemize}
    Ne s'applique pas qu'aux textes, mais de façon générale à tous les types de données !
    \begin{itemize}
        \item[→] Le temps permet-il de faire un tennis ? (Weka \texttt{weater.numeric})
        \item[→] Cet empan de texte est-il un groupe nominal ?
        \item[…]
    \end{itemize}
\end{frame}

\begin{frame}[fragile]{Évaluation}
    \colorlet{VP}{highlight3}
    \colorlet{VN}{highlight2}
    \colorlet{FN}{highlight4}
    \colorlet{FP}{highlight8}
    \begin{figure}
        \begin{tikzpicture}[
            table/.style={
                matrix of nodes,
                row sep=-\pgflinewidth,
                column sep=-\pgflinewidth,
                nodes={draw, text width=3ex, align=center},
                text depth=0.25ex,
                text height=1em,
                nodes in empty cells
            },
            aa/.style={alt=<3>{fill=VP}{}, alt={<4,5>{fill=VN}{}}},
            bb/.style={alt=<4>{fill=VP}{}, alt={<3,5>{fill=VN}{}}},
            cc/.style={alt=<5>{fill=VP}{}, alt={<3,4>{fill=VN}{}}},
            ab/.style={alt=<3>{fill=FN}{}, alt=<4>{fill=FP}{}, alt=<5>{fill=VN}{}},
            ac/.style={alt=<3>{fill=FN}{}, alt=<4>{fill=VN}{}, alt=<5>{fill=FP}{}},
            ba/.style={alt=<3>{fill=FP}{}, alt=<4>{fill=FN}{}, alt=<5>{fill=VN}{}},
            bc/.style={alt=<3>{fill=VN}{}, alt=<4>{fill=FN}{}, alt=<5>{fill=FP}{}},
            ca/.style={alt=<3>{fill=FP}{}, alt=<4>{fill=VN}{}, alt=<5>{fill=FN}{}},
            cb/.style={alt=<3>{fill=VN}{}, alt=<4>{fill=FP}{}, alt=<5>{fill=FN}{}},
        ]
            \matrix[table]{
                    & |(apred)| A   & |(bpred)| B   & |(cpred)| C\\
                |(atrue)| A   & |[aa]| $16$  & |[ab]| $0$   & |[ac]| $0$\\
                |(btrue)| B   & |[ba]| $0$   & |[bb]| $19$  & |[bc]| $1$\\
                |(ctrue)| C   & |[ca]| $0$   & |[cb]| $2$   & |[cc]| $15$\\
            };

            \draw [decorate, decoration={brace, amplitude=1em}, yshift=-0.5ex] (apred.north west) -- (cpred.north east) node [midway, above=1.25ex] {Classes prédites};
            \draw [decorate, decoration={brace, amplitude=1em, mirror}, xshift=-0.5ex] (atrue.north west) -- (ctrue.south west) node [midway, left=1.25ex, rotate=90, anchor=south] {Vraies classes};
        \end{tikzpicture}
        \caption{Matrice de confusion pour un problème à trois classes}
    \end{figure}
    \vspace{-1em}
    \only<2>{On calcule pour les mêmes indicateurs que pour la RI}
    \only<3>{Pour A}\only<4>{Pour B}\only<5>{Pour C}
    \only<2-5>{
        \begin{itemize}
            % TODO: dans la liste suivante ajouter les totaux pour chaque classe à chaque slide
            \item \textcolor{VP}{Vrais Positifs}
                \only<3>{$16$}\only<4>{$19$}\only<5>{$15$}
            \item \textcolor{VN}{Vrais Négatifs}
                \only<3>{$19+2+1+15=37$}
                \only<4>{$16+0+0+15=31$}
                \only<5>{$16+0+0+19=35$}
            \item \textcolor{FN}{Faux Négatifs}
                \only<3>{$0+0=0$}\only<4>{$0+1=1$}\only<5>{$0+2=2$}
            \item \textcolor{FP}{Faux Positifs}
                \only<3>{$0+0=0$}\only<4>{$0+2=2$}\only<5>{$0+1=1$}
        \end{itemize}
    }
    \only<6>{Puis pour chaque classe, $P$, $R$ et $F$ et la moyenne sur l'ensemble
        \begin{description}
            \item[macro-average] Sans pondération
            \item[micro-average] Pondérée par la taille des classes
        \end{description}
    }
\end{frame}


\begin{frame}{Exercice}
    Étant donnée la matrice de confusion précédente, déterminer précision, rappel et F-mesure pour chacune des classes, ainsi que la micro- et macro-average.
\end{frame}


% ██       █████  ██████  ███████ ██      ██      ██ ███    ██  ██████
% ██      ██   ██ ██   ██ ██      ██      ██      ██ ████   ██ ██
% ██      ███████ ██████  █████   ██      ██      ██ ██ ██  ██ ██   ███
% ██      ██   ██ ██   ██ ██      ██      ██      ██ ██  ██ ██ ██    ██
% ███████ ██   ██ ██████  ███████ ███████ ███████ ██ ██   ████  ██████

\lecture{Introduction à la fouille de textes}{2018-02-05}
\subsection{Annotation}

\begin{frame}[fragile=singleslide]{Annotation}
    L'\emph{annotation} ou \emph{étiquetage} est la tâche consistant à attribuer une étiquette à chaque élément d'un ensemble \alert{structuré}.

    \begin{itemize}
        \item « Déterminer les catégories grammaticales des mots d'une phrase »
        \item « Découper un discours en parties thématiques »
    \end{itemize}

    \begin{figure}
        \tikzset{external/export=true}
        \begin{tikzpicture}[true scale=0.80]
            \node[data, highlight=4] (in) {Donnée};
            \node[program, right=1cm of in, text width=12ex] (prog) {Programme d'annotation};
            \node[data, right=1cm of prog] (out) {Donnée annotée};
            \node[data, below=.6cm of prog, highlight=8] (res) {Ensemble des étiquettes};
            \draw[->] (in) -- (prog);
            \draw[->] (prog) -- (out);
            \draw[->] (res) -- (prog);
        \end{tikzpicture}
    \end{figure}
    \vskip-1em
    \begin{itemize}
        \item La \textcolor{highlight4}{donnée} à annoter est composée de plusieurs unités et munie d'une structure d'\alert{ordre}
        \item Chacune des unités se voit attribuer une des \textcolor{highlight8}{étiquettes} possibles, qui sont connus à l'avance
    \end{itemize}
\end{frame}

\begin{frame}{Structure et ordre}
    L'annotation se distingue de la classification par la notion de \emph{structure}.
    \begin{itemize}
        \item Les unités à annoter sont liées par des relations
            \begin{itemize}
                \item Ordre total (séquence)
                \item Ordre partiel (arbre, DAG)
                \item Arbitraires (graphe)
            \end{itemize}
        \item Les étiquettes qui leur sont attribuées dépendent de ces relations
    \end{itemize}
\end{frame}

\begin{frame}[fragile=singleslide]{Exemples}
    \begin{figure}
        \tikzset{external/export=true}
        \begin{tikzpicture}
            \matrix[matrix of nodes, anchor=base, row sep=1.5em] (m) {
                Le  & petit & chat  & est & mort\\
                DET & ADJ   & NC    & V   & ADJ\\
            };
            \foreach \x in {1, ..., 5}
                \draw[->] (m-1-\x) -- (m-2-\x);
        \end{tikzpicture}
        \caption{\emph{Part Of Speech Tagging}}
    \end{figure}
\end{frame}

\begin{frame}[fragile=singleslide]{Exemples}
    \begin{figure}
        \tikzset{external/export=true}
        \begin{tikzpicture}
            \matrix[matrix of nodes, anchor=base, row sep=1.5em] (m) {
                Le  & petit & chat  & est & mort\\
                B & I   & I   & B & B\\
            };
            \foreach \x in {1, ..., 5}
                \draw[->] (m-1-\x) -- (m-2-\x);

            \matrix[matrix of nodes, anchor=base, below=2em of m] (s){
                (   & Le    & petit & chat & )  & ( & est   & ) & (  & mort & )\\
            };
            \foreach \x/\y in {4/5, 4/6, 5/8, 5/9}
                \draw[->] (m-2-\x) -- (s-1-\y);
        \end{tikzpicture}
        \caption{\emph{Chunking}}
    \end{figure}
\end{frame}

\begin{frame}[fragile=singleslide]{Exemples}
    \begin{figure}
        \tikzset{external/export=true}
        \begin{tikzpicture}
            \tikzset{every tree node/.style={align=center,anchor=north}}
            \Tree [.S
                [.NP→\textcolor{highlight0}{sub} [.Det the ] [.N cat ] ]
                [.VP→\textcolor{highlight0}{pred} [.V sat ]
                    [.PP→\textcolor{highlight0}{mod} [.P on ]
                        [.NP [.Det the ] [.N mat ] ]
                    ]
                ]
            ]
        \end{tikzpicture}
        \caption{\textcolor{highlight0}{Étiquetage fonctionnel} d'un arbre syntaxique}
    \end{figure}
\end{frame}

\begin{frame}{Évaluation}
    Pour évaluer un étiquetage, on choisit en général de le considérer comme un problème de classification à plusieurs classes
    \begin{itemize}
        \item On considère chaque unité comme une donnée et chaque étiquette comme une classe
        \item On calcule comme précédemment $P$, $R$ et $F$
        \item On privilégie les micro-averages pour les scores globaux
    \end{itemize}
\end{frame}

\begin{frame}[fragile]{Aparté : micro-average et exactitude}
    \begin{theorem}
        Si chaque unité reçoit une unique étiquette, les micro-average de $P$, $R$ et $F$ sont égales à l'exactitude.
    \end{theorem}
    On considère la matrice de confusion suivante
    \begin{center}
        \tikzset{external/export=true}
        \begin{tikzpicture}[
            table/.style={
                matrix of nodes,
                row sep=-\pgflinewidth,
                column sep=-\pgflinewidth,
                nodes={draw, text width=3ex, align=center},
                text depth=0.25ex,
                text height=1em,
                nodes in empty cells
            },
            aa/.style={},
            bb/.style={},
            cc/.style={},
            ab/.style={},
            ac/.style={},
            ba/.style={},
            bc/.style={},
            ca/.style={},
            cb/.style={},
        ]
            \matrix[table]{
                    & |(apred)| A   & |(bpred)| B   & |(cpred)| C\\
                |(atrue)| A   & |[aa]| $aa$  & |[ab]| $ab$   & |[ac]| $ac$\\
                |(btrue)| B   & |[ba]| $ba$   & |[bb]| $bb$  & |[bc]| $bc$\\
                |(ctrue)| C   & |[ca]| $ca$   & |[cb]| $cb$   & |[cc]| $cc$\\
            };

            \draw [decorate, decoration={brace, amplitude=1em}, yshift=-0.5ex] (apred.north west) -- (cpred.north east) node [midway, above=1.25ex] {Classes prédites};
            \draw [decorate, decoration={brace, amplitude=1em, mirror}, xshift=-0.5ex] (atrue.north west) -- (ctrue.south west) node [midway, left=1.25ex, rotate=90, anchor=south] {Vraies classes};
        \end{tikzpicture}
    \end{center}
    Et on regarde le tableau !
\end{frame}

% TODO: add slides for the proof above

% ███████ ██
% ██      ██
% █████   ██
% ██      ██
% ███████ ██

\subsection{L'extraction d'informations}
\begin{frame}[fragile]{Extraction d'informations}
    L'\emph{extraction d'informations} est la tâche consistant à trouver dans un document les \alert{réponses} à des questions prédéfinies.

    \only<1>{
        \begin{itemize}
            \item « Déterminer le nom du héros et des principaux protagonistes d'un texte narratif »
            \item « Déterminer les symptômes présentés par un patient à partir d'un rapport clinique »
        \end{itemize}
    }

    \begin{figure}
        \tikzset{external/export=true}
        \begin{tikzpicture}[true scale=0.80]
            \node[data, highlight=4] (in) {Donnée};
            \node[program, right=1cm of in, text width=12ex] (prog) {Programme d'EI};
            \node[data, right=1cm of prog, highlight=6] (out) {Champs remplis};
            \node[data, below=.6cm of prog, highlight=8] (res) {Champs à remplir};
            \draw[->] (in) -- (prog);
            \draw[->] (prog) -- (out);
            \draw[->] (res) -- (prog);
        \end{tikzpicture}
    \end{figure}

    \only<2>{
        \begin{itemize}
            \item La \textcolor{highlight4}{donnée} est un texte brut ou un document semi-structuré
            \item La \textcolor{highlight6}{sortie} est un tableau qui donne la valeur de chacun des champs
            \item Les \textcolor{highlight8}{champs} \emph{peuvent} être multivalués et en nombre variable
        \end{itemize}
    }
\end{frame}

% TODO: add cites
\begin{frame}{Domaines d'application}
    Ils sont nombreux !
    \begin{itemize}
        \item Identification de protagonistes (littérature, militaire)
        \item Identification d'événement (biomédical, militaire)
        \item Fouille d'arguments
            \begin{itemize}
                \item Aide à la décision (politique)
                    \begin{itemize}
                        \item[→] IBM Watson (\textcite{slonim2014claims}, \shorturl{youtube.com/watch?v=sEf0GLvrP9U})
                    \end{itemize}
                \item Aide à la lecture (judiciaire, scientifique)
                    \begin{itemize}
                        \item[→] « Argument zoning » (\textcite{teufel2009argument}, \shorturl{www.cl.cam.ac.uk/~sht25/az.html})
                    \end{itemize}
            \end{itemize}
        \item …
    \end{itemize}
    À l'extrême, la tâche se confond avec la compréhension de document.
\end{frame}

\begin{frame}{Évaluation}
    L'idée est toujours de se comparer à une référence humaine.
    \begin{itemize}
        \item Basiquement : on compare les contenus des champs et on en déduit $P$, $R$ et $F$
        \item Plus subtilement : on peut utiliser des mesures d'adéquation entre les réponses
            \begin{itemize}
                \item[→] Une réponse peut être partiellement correcte : on pondère~!
            \end{itemize}
        \item Pour certaines tâches, on utilise des mesures spécifiques
            \begin{itemize}
                \item Pour les tâches comprenant une composante de localisation (NER, Argument Zoning), on peut appliquer des pondérations différentes à extraction et localisation
            \end{itemize}
    \end{itemize}
\end{frame}

% ██████  ███████ ██       █████  ████████ ██  ██████  ███    ██ ███████
% ██   ██ ██      ██      ██   ██    ██    ██ ██    ██ ████   ██ ██
% ██████  █████   ██      ███████    ██    ██ ██    ██ ██ ██  ██ ███████
% ██   ██ ██      ██      ██   ██    ██    ██ ██    ██ ██  ██ ██      ██
% ██   ██ ███████ ███████ ██   ██    ██    ██  ██████  ██   ████ ███████


\subsection{Relations entre tâches}
\begin{frame}<1>[label=taskrel]{Relations entre tâches}
    Les tâches présentées précédemment sont \emph{élémentaires} au sens où on peut y réduire la plupart des tâches de la fouille de texte.

    Cependant ces tâches ne sont pas complètement indépendantes les unes des autres \emph{via} des reformulations.
\end{frame}

\begin{frame}[fragile=singleslide]{La RI comme classification}
    Puisque la RI consiste à déterminer parmi un ensemble de documents lesquels sont pertinents, on peut la voir comme un problème de classification binaire.

    \begin{itemize}
        \item On répartit les documents entre les deux classes «\,pertinent\,» et « non-pertinent »
        \item La requête, qui était une donnée, devient une ressource
    \end{itemize}
    \vskip-1em
    \begin{figure}
        \tikzset{external/export=true}
        \begin{tikzpicture}[true scale=0.75]
            \node[data] (in) {Requête};
            \node[program, right=2cm of in, text width=16ex] (prog) {Programme de classification};
            \node[data, right=1.5cm of prog] (out) {Documents pertinents};
            \node[above left=0.25cm and 0.25cm of prog.north west] (ri) {RI};
            \draw ($(prog.north west)+(-1.5cm, 0.75cm)$) -- ($(prog.north east)+(1cm, 0.75cm)$) -- ($(prog.south east)+(1cm, -1.25cm)$) -- ($(prog.south west)+(-1.5cm, -1.25cm)$) -- cycle;
            \node[data, below=1.5cm of prog] (res) {Corpus};
            \draw[->] (in.south) |- ($(prog.south)-(0, 0.75cm)$) -- (prog.south);
            \draw[->] (res.west) -| ($(prog.west)-(0.75cm, 0)$) -- (prog.west);
            \draw[->] (prog) -- (out);
        \end{tikzpicture}
        \caption{La RI comme une classification}
    \end{figure}
\end{frame}

% TODO: add graphics and examples
\begin{frame}{L'annotation comme classification}
    Plusieurs stratégies sont envisageables pour conserver l'information de structure
    \begin{itemize}
        \item Voir la suite des étiquettes d'une séquence comme une seule classe.
        \item Étiqueter par classifications successives en utilisant à chaque étape l'ensemble des étiquettes précédentes comme information pour choisir l'étiquette suivante.
    \end{itemize}
\end{frame}

% TODO: add slides for EI as tagging


% ██████  ███████  ██████  ██████  ███    ███ ██████
% ██   ██ ██      ██      ██    ██ ████  ████ ██   ██
% ██   ██ █████   ██      ██    ██ ██ ████ ██ ██████
% ██   ██ ██      ██      ██    ██ ██  ██  ██ ██
% ██████  ███████  ██████  ██████  ██      ██ ██

\lecture{Introduction à la fouille de textes}{2018-02-12}
\subsection{Décomposition en tâches élémentaires}
\begin{frame}[fragile]{Décomposition en tâches élémentaires}
    Les tâches \emph{élémentaires} le sont parce qu'on peut y réduire des tâches plus complexes.

    \only<1>{
        \begin{figure}
            \tikzset{external/export=true}
            \begin{tikzpicture}[true scale=0.75]
                \node[data] (in) {Entrée};
                \node[right=1cm of in, text width=10ex, accent on=<1>] (prog) {Programme};
                \node[data, right=1cm of prog] (out) {Résultat};
                \draw[->] (in) -- (prog);
                \draw[->] (prog) -- (out);
            \end{tikzpicture}
            \caption{Schéma général d'une tâche}
        \end{figure}
        Le \alert{programme} réalisant la tâche sera ainsi composé de sous-programmes réalisant des tâches élémentaires.
    }

    \only<2>{
        \begin{figure}
            \tikzset{external/export=true}
            \begin{tikzpicture}[true scale=0.75]
                \node[data] (in1) {Entrée};
                \node[program, right=1cm of in1, text width=12ex] (prog1) {Programme élémentaire};
                \node[data, right=0.75cm of prog1] (out1) {Résultat};
                \draw[->] (in1) -- (prog1);
                \draw[->] (prog1) -- (out1);

                \node[program, right=0.75cm of out1, text width=12ex] (prog2) {Programme élémentaire};
                \node[data, right=1cm of prog2] (out2) {Résultat};
                \draw[->] (out1) -- (prog2);
                \draw[->] (prog2) -- (out2);

                \draw ($(prog1.north west)+(-0.5cm, 1cm)$) rectangle ($(prog2.south east)+(0.5cm, -1cm)$);
            \end{tikzpicture}
            \caption{Décomposition d'une tâche complexe}
        \end{figure}
    }

    \only<3>{
        \begin{figure}
            \tikzset{external/export=true}
            \begin{tikzpicture}[true scale=0.75]
                \node[data] (in1) {Entrée};
                \node[program, right=2cm of in1, text width=12ex] (prog1) {Programme élémentaire};
                \node[data, right=1cm of prog1] (out1) {Résultat};
                \draw[->] (in1) -- (prog1);
                \draw[->] (prog1) -- (out1);

                \node[program, above=1cm of out1, text width=12ex] (prog2) {Programme élémentaire};
                \node[data, right=2cm of prog2] (out2) {Résultat};
                \draw[->] (out1) -- (prog2);
                \draw[->] (prog2) -- (out2);
                \draw[->] (in1) -- ($(prog1.west)-(0.75cm, 0)$) |- (prog2.west);

                \draw ($(prog1.south west)+(-1cm, -1cm)$) rectangle ($(prog2.north east)+(1cm, 1cm)$);
            \end{tikzpicture}
            \caption{Décomposition d'une tâche complexe}
        \end{figure}
    }
\end{frame}

\begin{frame}{Exemple : les systèmes de Question/Réponse}
    Les systèmes de question/réponse fournissent des réponses factuelles à des requêtes données en langage naturel

    \begin{figure}
        \tikzset{external/export=true}
        \begin{tikzpicture}[true scale=0.75]
            \node[data, text width=15ex] (in) {« Quelle est la vitesse d'une hirondelle ? »};
            \node[program, right=1cm of in, text width=15ex] (prog) {Programme de Q/R};
            \node[data, right=1cm of prog] (out) {« \SI{60}{km/h} »};
            \node[data, below=.6cm of prog] (res) {Corpus};
            \draw[->] (in) -- (prog);
            \draw[->] (prog) -- (out);
            \draw[->] (res) -- (prog);
        \end{tikzpicture}
        \caption{Structure d'un système de Q/R}
    \end{figure}
\end{frame}

\begin{frame}[fragile]{Q/R via RI}
    % TODO: add progressive result feedback on the “Quelle est la vitesse d'une hirondelle sample question”
    % TODO: add arrow colours
    La première reformulation possible utilise un système de \alert<1>{RI}

    \begin{figure}
        \tikzset{external/export=true}
        \begin{tikzpicture}[true scale=0.55]
            \node[data, alt=<2>{highlight=6}{}] (in) {Question};
            \node[coordinate, right=1cm of in] (split) {};
            \fill[alt=<2>{highlight=6}{}] (split) circle[radius=2pt];
            \draw[alt=<2>{highlight=6, thick}{}] (in) -- (split);

            \node[program, above right=0.5cm and 1cm of split, alt=<2>{highlight=0}{}] (term) {Terminologie};
            \node[data, right=1cm of term, alt=<3>{highlight=0}{}] (words) {Mots};
            \node[program, right=1cm of words, accent on=<1>, alt=<3>{highlight=3}{}] (ri) {RI};
            \node[data, right=1cm of ri, alt=<3-4>{highlight=8}{}] (docs) {Docs};
            \node[program, right=1cm of docs, alt=<4>{highlight=3}{}] (ei) {EI};
            \node[coordinate, below right=0.5cm and 1cm of ei] (gather) {};
            \node[data, right=1cm of gather, alt=<4>{highlight=0}{}] (answer) {Réponse};
            \draw[->, alt=<2>{highlight=6, thick}{}] (split) |- (term);
            \draw[->] (term) -- (words);
            \draw[->] (words) -- (ri);
            \draw[->] (ri) -- (docs);
            \draw[->] (docs) -- (ei);
            \draw[->] (ei) -| (gather) -- (answer);

            \node[program, below right=0.5cm and 1cm of split, alt=<2>{highlight=3}{}] (classif) {Classifieur};
            \node[data, below=1cm of ei, alt=<4>{highlight=2}{}] (field) {Champs};
            \draw[->, alt=<2>{highlight=6, thick}{}] (split) |- (classif);
            \draw[->] (classif) -- (field);
            \draw[->] (field) -- (ei);

            \draw ($(split)+(-0.5cm, 2cm)$) rectangle ($(field.south east)+(1cm, -0.5cm)$);

            \node[data, below=3cm of ri, alt=<3>{highlight=2}{}] (corpus) {Corpus};
            \draw[->] (corpus) -- (ri);
        \end{tikzpicture}
        \caption{Système de Question/Réponse via Recherche d'Informations}
    \end{figure}
    \only<2->{
        \begin{itemize}
            \only<2>{
                \item \textcolor{highlight6}{La question en langage naturel} est envoyée en parallèle à \textcolor{highlight0}{un extracteur de mots-clés} et à un \textcolor{highlight3}{classifieur} qui détermine le type de la réponse attendue
            }
            \only<3>{
                \item \textcolor{highlight0}{Les mots-clés extraits} sont utilisés comme requête pour \textcolor{highlight3}{le programme de RI} qui sélectionne dans \textcolor{highlight2}{le corpus} \textcolor{highlight8}{les documents pertinents} pour répondre à la question
            }
            \only<4>{
                \item<4> \textcolor{highlight3}{Un programme d'EI} extrait des \textcolor{highlight8}{documents pertinents} le contenu des \textcolor{highlight2}{champs}, qui constituent la \textcolor{highlight0}{réponse} à la question posée
            }
        \end{itemize}
    }
\end{frame}

\begin{frame}<1>[fragile]{Q/R via base de connaissances}
    % TODO: add further overlay
    % TODO: add progressive result feedback on the “Quelle est la vitesse d'une hirondelle sample question”
    % TODO: add arrow colours
    Une autre stratégie consiste à reformuler la question en requête dans une \alert<1>{base de connaissances structurée}

    \begin{figure}
        \tikzset{external/export=true}
        \begin{tikzpicture}[true scale=0.6]
            \node[data, alt=<2>{highlight=6}{}] (in) {Question};
            \node[coordinate, right=1cm of in] (split) {};
            \draw[alt=<2>{highlight=6, thick}{}] (in) -- (split);

            \node[program, above right=0.5cm and 1cm of split, alt=<2>{highlight=0}{}] (trad) {Traduction};
            \node[data, right=1cm of trad, alt=<2-3>{highlight=3}{}] (req) {Requête};
            \node[program, right=1cm of req, alt=<3>{highlight=3}{}] (int) {Interrogation};
            \node[coordinate, below right=0.5cm and 1cm of int] (gather) {};
            \node[data, right=1cm of gather, alt=<4>{highlight=0}{}] (answer) {Réponse};
            \draw[->, alt=<2>{highlight=6, thick}{}] (split) |- (trad);
            \draw[->] (trad) -- (req);
            \draw[->] (req) -- (int);
            \draw[->] (int) -| (gather) -- (answer);

            \node[program, below=1cm of req, alt=<2>{highlight=3}{}] (ei) {EI};
            \node[data, accent on=<1>, alt=<4>{highlight=2}{}] at (int|-ei) (base) {Base};
            \draw[->] (ei) -- (base);
            \draw[->] (base) -- (int);

            \draw ($(split|-trad.north)+(-0.5cm,0.5cm)$) rectangle ($(int.east|-ei.south)+(1.25cm, -0.5cm)$);

            \node[data, below=1cm of ei, alt=<3>{highlight=2}{}] (corpus) {Corpus};
            \draw[->] (corpus.west) -- ++ (-0.25cm, 0) |- (ei.west);
        \end{tikzpicture}
        \caption{Système de Question/Réponse utilisant une base de connaissances}
    \end{figure}
    \only<2->{
        \begin{itemize}
            \item<2|only@2> \textcolor{highlight6}{La question en langue naturelle} est \textcolor{highlight0}{traduite} en une \textcolor{highlight3}{requête} dans un langage formel (SQL, SPARQL…)
        \end{itemize}
    }
\end{frame}

% TODO: add links and refs for the two deompositions

\begin{frame}{Conclusion}
    On a donc vu qu'on pouvait
    \begin{itemize}
        \item Réaliser des tâches complexes en se ramenant des tâches élémentaires
        \item Reformuler les tâches élémentaires en terme de classification
    \end{itemize}

    En pratique, on peut donc presque toujours ramener n'importe quelle tâche de fouille de texte à de la classification, on parlera donc pour celle-ci de \alert{tâche pivot}.
    \begin{itemize}
        \item[→] Attention cependant à ne pas faire cuire les pâtes comme un mathématicien…
    \end{itemize}
\end{frame}

% ██████  ███████ ██████  ██████  ███████ ███████
% ██   ██ ██      ██   ██ ██   ██ ██      ██
% ██████  █████   ██████  ██████  █████   ███████
% ██   ██ ██      ██      ██   ██ ██           ██
% ██   ██ ███████ ██      ██   ██ ███████ ███████


\section{Représentation des données}

\begin{frame}{Représentation des données}
    Étant donné que
    \begin{itemize}
        \item La classification joue en fouille de texte le rôle de tâche pivot
        \item On privilégie pour la classification des données au format tabulaire
    \end{itemize}
    Il est naturel de vouloir mettre les données à traiter sous forme tabulaire.
\end{frame}

% ███████ ████████  █████  ████████
% ██         ██    ██   ██    ██
% ███████    ██    ███████    ██
%      ██    ██    ██   ██    ██
% ███████    ██    ██   ██    ██

\subsection{Spécificités statistiques}
\begin{frame}{Loi de Zipf}
    Dans \textit{Ulysse} de James Joyce on\textsuperscript{1} observe\textsuperscript{2} que
    \begin{itemize}
        \item Le mot le plus courant apparaît \num{8000} fois
        \item Le dixième mot le plus courant apparaît \num{800} fois
        \item Le centième mot le plus courant apparaît \num{80} fois
        \item Le millième mot le plus courant apparaît \num{8} fois
    \end{itemize}

    \begin{block}{Hypothèse (Loi de Zipf)}
        La fréquence $f(n)$ du $n$-ième mot le plus fréquent d'un corpus vérifie
        \begin{equation}
            f(n) = \frac{K}{n}
        \end{equation}
        où $K$ est une constante ne dépendant que du corpus.
    \end{block}
    \vskip0pt plus 1fill
    {\tiny 1. Georges Zipf (1902-1950) dans \parencite{zipf1949human}\\2. d'après la légende}
\end{frame}

% TODO: add Ulysse répartition
% TODO: add visualisation for fat tail
\begin{frame}{Loi de Zipf : observations}
    \begin{figure}
        \tikzset{external/export=true}
        \begin{tikzpicture}
            \begin{axis}[xmin=0, ymin=0, xmax=20,
                         width=0.9\textwidth,
                         height=0.8\textheight,
                         xlabel={Rang},
                         ylabel={Fréquence d'apparition},
                         title={Loi de Zipf : $y=\frac{K}{x}$},
                         scaled ticks=false,
                         ticklabel style={/pgf/number format/.cd, 1000 sep={\,}}]
                \addplot[highlighta, domain=1:20, samples=1001] {max(8000/x, 1)};
            \end{axis}
        \end{tikzpicture}
        \caption{Courbe d'une loi de Zipf ($K=\num{8000}$)}
    \end{figure}
\end{frame}

% TODO: add cites
\begin{frame}{Loi de Zipf : observations}
    \begin{itemize}
        \item La loi de Zipf se vérifie plutôt bien expérimentalement
        \item En pratique, les répartitions observées sont de la forme $f(n)=\frac{k}{x^s}$ avec $s$ proche de $1$
        \item Ce type de distribution, dites \emph{loi de puissance} est omniprésent en statistiques (en en sciences en général)
        \item Elles font parties des distributions dites \emph{à longue traîne} (\textit{fat tail})
        \item Une autre approche due à Mandelbrot présente une généralisation de la loi de Zipf comme le résultat de contraintes d'optimalité d'utilisation d'un canal de communication.
    \end{itemize}
\end{frame}

\begin{frame}{Loi de Heaps}
    Si la loi de Zipf donne une estimation de la répartition du vocabulaire d'un corpus, la loi de Heaps est une estimation de sa diversité
    \begin{block}{Hypothèse : loi de Heaps}
        Le nombre $V$ de mots distincts dans sous-corpus de taille $M$ vérifie
        \begin{equation}
            V = K×M^β
        \end{equation}
        Où $K$ et $β$ sont des paramètres dépendant du corpus
    \end{block}
    \begin{itemize}
        \item[→] Ce $K$ n'est pas le même que pour la loi de Zipf, et $β$ n'a aucun lien avec la pondération de $F_β$
        \item[→] On parle souvent de relation \emph{types-tokens}
        \item[→] Pour l'anglais, on a $K∈[30, 100]$ et $β≈0.5$
        \item[→] Cette loi peut-elle être valable quelle que soit la taille de la collection ?
    \end{itemize}
\end{frame}

\begin{frame}[label=heapslawgraph]{Loi de Heaps}
    \begin{figure}
        \tikzset{external/export=true}
        \begin{tikzpicture}
            \begin{axis}[xmin=0, xmax=10000, ymin=0,
                         width=0.9\textwidth,
                         height=0.8\textheight,
                         xlabel={Taille de la collection},
                         ylabel={Taille du vocabulaire},
                         title={Loi de Heaps : $y=K×x^β$},
                         scaled ticks=false,
                         ticklabel style={/pgf/number format/.cd, 1000 sep={\,}}]
                \addplot[highlighta, domain=0:10000, samples=1001] {40*x^0.5};
            \end{axis}
        \end{tikzpicture}
        \caption{Courbe d'une loi de Heaps}
    \end{figure}
\end{frame}

% ███████ ███████  █████  ████████ ███████
% ██      ██      ██   ██    ██    ██
% █████   █████   ███████    ██    ███████
% ██      ██      ██   ██    ██         ██
% ██      ███████ ██   ██    ██    ███████


\subsection{Choix des attributs}
\begin{frame}{Choix des attributs}
    Pour pouvoir faire de la classification, il faut pouvoir mettre les données au bon format
    \begin{description}[<+->][*]
        \item[Objectif] Transformer les documents à traiter en fichiers tabulaires pour les passer à un classifieur
        \item[Problème] Quel choix d'attributs (colonnes) ?
        \item[Solution] Ça dépend des cas !
            \begin{itemize}
                \item[→] Mais on peut identifier plusieurs stratégies élémentaires (air connu)
            \end{itemize}
    \end{description}
\end{frame}

\begin{frame}[fragile=singleslide]{Caractères}
    Puisqu'un texte brut est une séquence de caractères : utilisons comme attribut la fréquence de chaque caractère

    \begin{figure}
        \begin{tabu}{*{5}{>{\ttfamily\small}X[m, c]}}
            Texte   & a & b & c & …\\
            Ulysse  & 90578 & 17848 & 27902 & …
        \end{tabu}
    \end{figure}

    \begin{itemize}
        \item Combien d'attributs par texte ?
        \item Est-ce suffisant ?
            \begin{itemize}
                \item Suffisant pour quoi ?
            \end{itemize}
    \end{itemize}
\end{frame}

\begin{frame}{$n$-grammes de caractères}
    % TODO: add corrections
    % TODO: add sources
    % TODO: add examples
    Une stratégie un peu plus raffinée est de compter non pas les caractères, mais les séquences de caractères de longueur $n$.

    Exemple : « Le petit chat est mort »

    \begin{itemize}
        \item Quels sont les unigrammes ?
        \item Quels sont les bigrammes ?
        \item Quels sont les trigrammes ?
        \item En général, pour un alphabet à $k$ caractères, combien y a-t-il de $n$-grammes ?
    \end{itemize}

    En pratique, les trigrammes peuvent suffire pour certaines applications !
    \begin{itemize}
        \item Détection du plagiat
    \end{itemize}

    Pour plus de richesse, on peut aussi utiliser des \emph{skip-grams}
\end{frame}

\lecture{Introduction à la fouille de textes}{2018-02-19}

\begin{frame}<-2>{Mots}
    Faisons \alt<1>{enfin de la}{un peu de} linguistique : comptons les mots !
    \begin{itemize}
        \item Problème : qu'est-ce qu'un mot ?
            \begin{itemize}
                \item \emph{pomme de terre} ?
                \item \emph{y a-\textbf{t}-il} ?
                \item …
            \end{itemize}
        \item On a plutôt tendance à compter les \alert{tokens}
            \begin{itemize}
                \item « Séquences de caractères comprises entre deux séparateurs »
                \item[→] Problème : qu'est-ce qu'un séparateur ? \begin{itemize}
                    \item « E-mail » vs. « Alsace–Lorraine »
                    \item « […] kiwi. Hier […] » vs. « M. Martin »
                    \item « Yann Le Bourdonnec » vs. « Félix le chat »
                \end{itemize}
                \item On délègue à un segmenteur (\emph{tokenizer})
            \end{itemize}
    \end{itemize}
\end{frame}

\begin{frame}<1>[label=wordcols]{Des mots aux colonnes}
    Objectif : utiliser les fréquences des mots comme attributs (colonnes) dans une représentation tabulaire.
    \begin{itemize}
        \item Combien de colonnes faut-il ?
\only<2->{
            \begin{itemize}
                \item[→] $K×M^β$ (loi de Heaps)
                \item Pour \emph{Ulysse}, environ \num{34000}
            \end{itemize}
        \item Il faut donc arriver à filtrer !
            \begin{itemize}
                \item Supprimer les mots vides (\emph{stop words}) : \emph{le}, \emph{à}, \emph{mais}…
                \item Ne conserver certaines catégories spécifiques à la tâche (noms, adjectifs…)
                \item Supprimer les hapax (mots n'apparaissant qu'un seule fois)
                \item[→] De façon générale, ne conserver qu'une bande de fréquence
            \end{itemize}
}
    \end{itemize}
\end{frame}

\againframe{heapslawgraph}

\againframe<2>{wordcols}

\begin{frame}[fragile]{Filtrer les hapax}
    \begin{figure}
        \tikzset{external/export=true}
        \begin{tikzpicture}
            \begin{axis}[xmin=0, ymin=0, xmax=40, ymax=15,
                         xtick=\empty,
                         ytick=\empty,
                         alt=<2>{extra y ticks={1}}{},
                         width=0.9\textwidth,
                         height=0.8\textheight,
                         xlabel={Rang},
                         ylabel={Fréquence d'apparition},
                         title={$y=\frac{K}{x}$}]
                \addplot[highlighta, domain=1:20, samples=501] {20/x};
                \addplot[highlighta, alt=<2>{dotted}{}, domain=20:40, samples=500] {1};
                \only<2>{
                    \draw[highlight6] (axis cs:0,1) -- (current axis.east|-{axis cs:0,1});
                }
            \end{axis}
        \end{tikzpicture}
        \caption{\alt<2>{Filtrage des hapax sur la c}{C}ourbe de Zipf}
    \end{figure}
\end{frame}

\againframe<2>{wordcols}

\begin{frame}[fragile=singleslide]{Filtrer une bande de fréquences}
    \begin{figure}
        \tikzset{external/export=true}
        \begin{tikzpicture}
            \begin{axis}[xmin=0, ymin=0, xmax=40, ymax=20,
                         xtick=\empty,
                         ytick={2, 15},
                         yticklabels={$a$, $b$},
                         width=0.9\textwidth,
                         height=0.8\textheight,
                         xlabel={Rang},
                         ylabel={Fréquence d'apparition},
                         title={$y=\frac{K}{x}$}]
                \addplot[highlighta, dotted, domain=1:1.33, samples=333] {20/x};
                \addplot[highlighta, domain=1.33:10, samples=333] {20/x};
                \addplot[highlighta, dotted, domain=10:40, samples=333] {max(20/x,1)};
                \draw[highlight6] (axis cs:0,15) -- (current axis.east|-{axis cs:0,15});
                \draw[highlight6] (axis cs:0,2) -- (current axis.east|-{axis cs:0,2});
            \end{axis}
        \end{tikzpicture}
        \caption{Filtrage d'une bande de fréquences sur la courbe de Zipf}
    \end{figure}
\end{frame}

\begin{frame}{Mots}
    Pour réduire encore plus le nombre de colonnes
    \begin{itemize}
        \item Lemmatiser : \{\emph{est}, \emph{était}, \emph{suis}, \emph{êtes}, \emph{furent}…\} → \emph{est}
        \item Radicaliser : \{\emph{homme}, \emph{hommes}\} → \emph{homme}
        \item Fixer un lexique \emph{a priori}
            \begin{itemize}
                \item[→] Avec les dangers que ça comporte
            \end{itemize}
    \end{itemize}

    À l'inverse, pour plus de détails, on peut utiliser des $n$-grammes de mots
    \begin{itemize}
        \item[→] Représentation plus riche, mais amplifie le problème de quantité
    \end{itemize}
\end{frame}

\begin{frame}{Traits linguistiques avancés}
    Si les ressource le permettent, on peut envisager d'autres attributs
    \begin{itemize}
        \item Avec un étiqueteur morphosyntaxique : POS, $n$-grammes de POS
        \item Avec un parser : largeur/profondeur/taille moyenne des arbres/constituants, paires gouverneur-gouverné, paires nœud-relation…
        \item Avec des analyseurs sémantiques : rôles
        \item Avec des bases de connaissances : présence de certains concepts
        \item …
    \end{itemize}
    Mais on introduit alors des dépendances vis-à-vis des ressources, ce qui multiplie les causes d'erreurs.
\end{frame}

% ███    ███ ███████  █████  ███████ ██    ██ ██████  ███████
% ████  ████ ██      ██   ██ ██      ██    ██ ██   ██ ██
% ██ ████ ██ █████   ███████ ███████ ██    ██ ██████  █████
% ██  ██  ██ ██      ██   ██      ██ ██    ██ ██   ██ ██
% ██      ██ ███████ ██   ██ ███████  ██████  ██   ██ ███████

\subsection{Valuation des attributs}
\begin{frame}[label=attrval]{Valuation des attributs}
    Avoir choisi les attributs à utiliser pour une classification ne suffit pas : encore faut-il leur donner une valeur
    \begin{description}[*]
        \item[Booléenne] Vrai/Faux ($0$/$1$) suivant que l'attribut est ou n'est pas présent dans le document
        \item[Occurrences] Le nombre $n_{i,j}$ de fois qu'apparaît l'attribut $a_j$ dans le document $t_i$
        \item[Fréquences normalisées par ligne] (ici pour la norme $1$)
            \begin{equation}
                \frac{\mathnode{freqfracnum}{n_{i,j}}}{\mathnode{freqfracden}{\sum_k n_{i,k}}}
            \end{equation}
    \end{description}
    \textbf{Note} : ici et dans la suite, on considère que toutes les colonnes sont de même nature
\end{frame}

\begin{frame}[fragile=singleslide]{Notations}
    \begin{itemize}
        \item Les textes sont notés $t_1$, $t_2$, …, $t_m$
        \item Les attributs sont notés $a_1$, $a_2$, …, $a_n$
        \item La valeur du $j$-ème attribut pour le $i$-ème texte est notée $a_{i,j}$ (ligne, colonne)
    \end{itemize}

    \begin{figure}
        \begin{tabu}{*{5}{X[m, c]}}
                    & $a_1$     & $a_2$     & $…$ & $a_n$\\
            $t_1$   & $a_{1,1}$ & $a_{1,2}$ & $…$ & $a_{1,n}$\\
            $t_2$   & $a_{2,1}$ & $a_{2,2}$ & $…$ & $a_{2,n}$\\
            $⋮$    & $⋮$      & $⋮$       &     & $⋮$\\
            $t_m$   & $a_{m,1}$ & $a_{m,2}$ & $…$ & $a_{m,n}$\\
         \end{tabu}
    \end{figure}
\end{frame}

\againframe{attrval}

% TODO: add cites
\begin{frame}{TF.IDF}
    On veut pouvoir pondérer l'importance d'un terme (mot, caractère, $n$-gramme…) en fonction de sa spécificité (au sens large) pour un document.

    \begin{itemize}
        \item \emph{\textbf{T}erm \textbf{F}requency $×$ \textbf{I}nverse \textbf{D}ocument \textbf{F}requency}
        \item $\TF(i,j) = n_{i,j}$ ou $\TF(i,j) = \frac{n_{i,j}}{\sum_kn_{i,j}}$
        \item
            \only<1>{
                \begin{equation}
                    \IDF(j) = \log\mleft(\frac{m}{\#\compset{i}{a_{i,j}>0}}\mright)
                \end{equation}
            }
            \only<2>{
                \begin{equation}
                    \IDF(j) = \log\frac{\overbrace{m}^{\mathclap{\text{nombre total de documents}}}}{\underbrace{\#\compset{i}{a_{i,j}>0}}_{\mathclap{\text{nombre de documents contenant $a_j$}}}}
                \end{equation}
            }
            \only<3->{$\IDF(j) = \log\frac{m}{\#\compset{i}{a_{i,j}>0}}$}
        \only<3->{
            \item Intuitivement $\IDF$ mesure la rareté d'un attribut, donc (on espère !) son informativité
            \item « Si $a_j$ est présent dans tous les textes, savoir qu'il est présent dans $t_i$ ne donne pas d'information sur $t_i$ »
            \item \alt<4>{$\log$ donne à $\IDF$ la forme d'une \emph{surprise} au sens de Shannon}{$\log$ est une façon pratique de modérer les effets de cette pondération : on devrait parler de $\log$-$\IDF$}
        }
    \end{itemize}
\end{frame}

\subsection{Représentations vectorielles et similarités}

\begin{frame}{Des sacs de mots aux vecteurs}
    Dans tout ce qui précède, on ne tient pas compte des positions relatives des termes, mais seulement de leurs nombres d'occurrences.
    \begin{itemize}
        \item Approche \emph{bag-of-words} (sac de mots)
        \item « Siobhan tue Eóghan » vs. « Eóghan tue Shiobhan »…
        \begin{itemize}
            \item[→] On compte (comme d'habitude) sur la masse de données pour passer outre ce genre de problèmes
        \end{itemize}
    \end{itemize}
    En pratique on fait même plus fort
    \begin{itemize}
        \item Hypothèse d'indépendance : si $k≠ℓ$, $a_k$ et $a_ℓ$ sont indépendants
        \item On peut alors considérer chaque ligne comme un vecteur (ou un point…) d'un espace vectoriel
        \item Et accéder à la puissance de l'algèbre linéaire et de la géométrie vectorielle !
    \end{itemize}
\end{frame}

\begin{frame}{Les maths en cinq secondes : vecteurs}
    On appelle \emph{vecteur de dimension $n$} tout $n$-uplet de nombres
    \begin{equation}
        v = \vcord{v_1, ⋮, v_n}
    \end{equation}
    Si $n=2$, on peut les représenter simplement dans le plan
    \begin{figure}
        \tikzset{external/export=true}
        \begin{tikzpicture}
            \draw [help lines, xstep=1cm, ystep=1cm] (0, 0) grid (5.25, 4.25);

            \draw[->] (-0.5,0) -- (5.25, 0);
            \foreach \x in {1,...,5}
                \draw[shift={(\x, 0)}] (0pt,2pt) -- (0pt,-2pt) node[below] {\footnotesize $\x$};
            \draw[->] (0, -0.5) -- (0, 4.25);

            \foreach \y in {1,...,4}
                \draw[shift={(0,\y)}] (2pt,0pt) -- (-2pt,0pt) node[left] {\footnotesize $\y$};

            \draw (0, 0) node[below left] {\footnotesize $0$};

            \draw [->,line width=2pt] (0,0) -- (2,3);

            \draw (1.5, 1.5) node[anchor=west] {$v=\vcord{2,3}$};
        \end{tikzpicture}
        \caption{Vecteur en dimension $2$}
    \end{figure}
\end{frame}

\begin{frame}{Les maths en cinq secondes : vecteurs}
    On définit la \emph{somme} et le \emph{produit par un nombre} par
    \begin{equation}
        \vcord{a_1, ⋮, a_n} + \vcord{b_1, ⋮, b_n} = \vcord{a_1+b_1, ⋮, a_n+b_n}
    \end{equation}
    et
    \begin{equation}
        λ⋅\vcord{a_1, ⋮, a_n} = \vcord{λa_1, ⋮, λa_n}
    \end{equation}
    par exemple
    \begin{equation}
        \vcord{2, 7} + \vcord{1, 3} = \vcord{3, 10}
    \end{equation}
    \begin{equation}
        5⋅\vcord{3.5, -3} = \vcord{17.5, -15}
    \end{equation}
\end{frame}

\begin{frame}[fragile]{Les maths en cinq secondes : vecteurs}
    Géométriquement
    \only<1-4>{
        \begin{figure}
            \tikzset{external/export=true}
            \begin{tikzpicture}
                \draw [help lines, xstep=1cm, ystep=1cm] (0, 0) grid (5.25, 4.25);

                \draw[->] (-0.5,0) -- (5.25, 0);
                \foreach \x in {1,...,5}
                    \draw[shift={(\x, 0)}] (0pt,2pt) -- (0pt,-2pt) node[below] {\footnotesize $\x$};
                \draw[->] (0, -0.5) -- (0, 4.25);

                \foreach \y in {1,...,4}
                    \draw[shift={(0,\y)}] (2pt,0pt) -- (-2pt,0pt) node[left] {\footnotesize $\y$};

                \draw (0, 0) node[below left] {\footnotesize $0$};

                \draw [->, line width=2pt, alt=<2-3>{invisible}{}] (0,0) -- (3,1) node[midway, above] {$v$};
                \draw [->, line width=2pt, alt=<2-3>{}{invisible}] (1,2) -- (4,3) node[midway, above] {$v$};

                \draw [->, line width=2pt] (0,0) -- (1,2) node[midway, above left] {$u$};

                \draw[->, line width=2pt, alt=<3->{}{invisible}] (0,0) -- (4,3) node[midway, alt=<3>{below right}{above}] {$u+v$};
            \end{tikzpicture}
            \caption{Somme de deux vecteurs}
        \end{figure}
    }
    \only<5-6>{
        \begin{figure}
            \tikzset{external/export=true}
            \begin{tikzpicture}
                \draw [help lines, xstep=1cm, ystep=1cm] (0, 0) grid (5.25, 4.25);

                \draw[->] (-0.5,0) -- (5.25, 0);
                \foreach \x in {1,...,5}
                    \draw[shift={(\x, 0)}] (0pt,2pt) -- (0pt,-2pt) node[below] {\footnotesize $\x$};
                \draw[->] (0, -0.5) -- (0, 4.25);

                \foreach \y in {1,...,4}
                    \draw[shift={(0,\y)}] (2pt,0pt) -- (-2pt,0pt) node[left] {\footnotesize $\y$};

                \draw (0, 0) node[below left] {\footnotesize $0$};

                \draw [->, line width=2pt, alt=<5>{}{invisible}] (0,0) -- (2,1) node[midway, above] {$v$};

                \draw[->, line width=2pt, alt=<6>{}{invisible}] (0,0) -- (4,2) node[midway, above] {$2v$};
            \end{tikzpicture}
            \caption{produit d'un vecteur par un nombre}
        \end{figure}
    }
\end{frame}

\begin{frame}{Interprétation}
    Bien entendu, l'hypothèse d'indépendance est fausse en général
    \begin{itemize}
        \item[→] Si un texte contient \emph{main}, il est plus probable qu'il emploie également \emph{doigt}
    \end{itemize}
    Et représenter les documents par des vecteurs a ses limites
    \begin{itemize}
        \item[→] Que signifie sommer deux textes ?
    \end{itemize}
    Mais ces approximations permettent d'utiliser une machinerie mathématique qui marche assez bien en pratique.

    On est bien dans la philosophie de la fouille de textes !
\end{frame}



%  █████  ██████  ██████  ███████ ███    ██ ██████  ██ ██   ██
% ██   ██ ██   ██ ██   ██ ██      ████   ██ ██   ██ ██  ██ ██
% ███████ ██████  ██████  █████   ██ ██  ██ ██   ██ ██   ███
% ██   ██ ██      ██      ██      ██  ██ ██ ██   ██ ██  ██ ██
% ██   ██ ██      ██      ███████ ██   ████ ██████  ██ ██   ██

\appendix
\pgfkeys{/metropolis/inner/sectionpage=simple}  % Avoid random errors with section page progressbar
\section{Annexes}
\pdfbookmark[2]{Remerciements}{acknowledgements}
\begin{frame}{Remerciements}
    Ce cours a été construit à partir du polycopié de cours \citetitle{tellier2017fouille} \parencite{tellier2017fouille} et des précieux conseils d'Isabelle Tellier que je ne saurais trop remercier pour sa confiance et son dévouement.
\end{frame}

\pdfbookmark[2]{Références}{references}
\begin{frame}[allowframebreaks]{References}
    \printbibliography[heading=none]
\end{frame}

\pdfbookmark[2]{Licence}{licence}
\begin{frame}{Licence}
    \begin{center}
        {\huge \ccby}
        \vfill
        This document is available under the terms of the Creative Commons Attribution 4.0 International License (CC BY 4.0) (\shorturl{creativecommons.org/licenses/by/4.0})

        Exceptions to the above statement are listed at {\small\shorturl{loicgrobol.github.io/intintro-fouille-textes\#licences}}
        \vfill
        © 2018, Loïc Grobol <\shorturl[mailto][:]{loic.grobol@gmail.com}>

        \shorturl[http]{lattice.cnrs.fr/Grobol-Loic}
    \end{center}
\end{frame}

\end{document}
